(()=>{function q(i){let t=i({css:(s,...n)=>s.raw[0]+n.join("")});if(document.adoptedStyleSheets===void 0){let s=document.createElement("style");s.textContent=t,document.head.appendChild(s);return}let e=new CSSStyleSheet;e.replaceSync(t),document.adoptedStyleSheets=[...document.adoptedStyleSheets,e]}function ye(i,t){let e=i;for(;e;){if(t(e))return e;e=e.parentElement}}function W(i,t){let e=document.createTreeWalker(i,NodeFilter.SHOW_ELEMENT,t?{acceptNode:s=>{let n,o;return t(s,{skip:()=>n=!0,reject:()=>o=!0}),n?NodeFilter.FILTER_SKIP:o?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT}}:{});return new zt(e)}var zt=class{constructor(t){this.walker=t}from(t){return this.walker.currentNode=t,this}first(){return this.walker.firstChild()}last(){return this.walker.lastChild()}next(t){return this.walker.currentNode=t,this.walker.nextSibling()}nextOrFirst(t){let e=this.next(t);return e||(this.walker.currentNode=this.walker.root,this.first())}prev(t){return this.walker.currentNode=t,this.walker.previousSibling()}prevOrLast(t){let e=this.prev(t);return e||(this.walker.currentNode=this.walker.root,this.last())}closest(t,e){let s=this.from(t).walker;for(;s.currentNode;){if(e(s.currentNode))return s.currentNode;s.parentNode()}}contains(t){return this.find(e=>e===t)}find(t){return this.walk((e,s)=>{t(e)&&s(e)})}findOrFirst(t){return this.find(t)||(this.walker.currentNode=this.walker.root),this.first()}each(t){this.walk(e=>t(e))}some(t){return!!this.find(t)}every(t){let e=!0;return this.walk(s=>{t(s)||(e=!1)}),e}map(t){let e=[];return this.walk(s=>e.push(t(s))),e}filter(t){let e=[];return this.walk(s=>t(s)&&e.push(s)),e}walk(t){let e,s=this.walker,n;for(;s.nextNode()&&(e=s.currentNode,t(e,o=>n=o),n===void 0););return n}};function C(i,t){customElements.define(`ui-${i}`,t)}function w(i,t,e,s={}){return i.addEventListener(t,e,s),{off:()=>i.removeEventListener(t,e),pause:n=>{i.removeEventListener(t,e),n(),i.addEventListener(t,e)}}}function _e(i){return["a[href]","area[href]","input:not([disabled])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","iframe","object","embed","[tabindex]","[contenteditable]"].some(e=>i.matches(e))&&i.tabIndex>=0}function oi(i,t){let e;return function(){let s=this,n=arguments;e||(i.apply(s,n),e=!0,setTimeout(()=>e=!1,t))}}var Mt="pointer";document.addEventListener("keydown",()=>Mt="keyboard",{capture:!0});document.addEventListener("pointerdown",i=>{Mt=i.pointerType==="mouse"?"mouse":"touch"},{capture:!0});function jt(){return Mt==="keyboard"}function ri(){return Mt==="touch"}function Se(i,t){i.addEventListener("keydown",e=>{e.key.length===1&&/[a-zA-Z]/.test(e.key)&&(t(e.key),e.stopPropagation())})}function li(i,t){return"lofi-"+(t?t+"-":"")+Math.random().toString(16).slice(2)}function M(i,t){let e=i.hasAttribute("id")?i.getAttribute("id"):li(i,t);return h(i,"id",e),i._x_bindings||(i._x_bindings={}),i._x_bindings.id||(i._x_bindings.id=e),e}function tt(){let i=!1;return t=>(...e)=>{i||(i=!0,t(...e),i=!1)}}function ht(i,t,{gain:e,lose:s,focusable:n,useSafeArea:o}){let r=!1;n&&document.addEventListener("focusin",f=>{jt()&&(i.contains(f.target)||t.contains(f.target)?(r=!0,e()):(r=!1,s()))});let a=()=>{},c=()=>{},u=()=>{r=!1,s(),a(),c()},p=()=>{r=!1,a(),c()};return i.addEventListener("pointerenter",f=>{ri()||r||(r=!0,e(),setTimeout(()=>{let{safeArea:v,redraw:m,remove:l}=o?ai(i,t,f.clientX,f.clientY):di();a=l;let d,g=oi(b=>{let A=t.getBoundingClientRect(),x=i.getBoundingClientRect(),_;switch(v.contains(b.target)&&ci(x,A,b.clientX,b.clientY)?_="safeArea":t.contains(b.target)?_="panel":i.contains(b.target)?_="trigger":_="outside",d&&clearTimeout(d),_){case"outside":u();break;case"trigger":m(b.clientX,b.clientY);break;case"panel":a();break;case"safeArea":m(b.clientX,b.clientY),d=setTimeout(()=>{u()},300);break;default:break}},100);document.addEventListener("pointermove",g),c=()=>document.removeEventListener("pointermove",g)}))}),{clear:p}}function ai(i,t,e,s){let n=document.createElement("div"),o=t.getBoundingClientRect(),r=i.getBoundingClientRect();n.style.position="fixed",h(n,"data-safe-area","");let a=(c,u)=>{if(o.top===0&&o.bottom===0)return;let p;o.left<r.left&&(p="left"),o.right>r.right&&(p="right"),o.top<r.top&&o.bottom<u&&(p="up"),o.bottom>r.bottom&&o.top>u&&(p="down"),p===void 0&&(p="right");let f,v,m,l,d,g,b,A,x=10;switch(p){case"left":f=o.right,v=Math.max(o.right,c)+5,m=v-f,l=Math.min(r.top,o.top)-x,d=Math.max(r.bottom,o.bottom)+x,g=d-l,b=u-l,A=`polygon(0% 0%, 100% ${b}px, 0% 100%)`;break;case"right":f=Math.min(o.left,c)-5,v=o.left,m=v-f,l=Math.min(r.top,o.top)-x,d=Math.max(r.bottom,o.bottom)+x,g=d-l,b=u-l,A=`polygon(0% ${b}px, 100% 0%, 100% 100%)`;break;case"up":f=Math.min(c,o.left)-x,v=Math.max(c,o.right)+x,m=v-f,l=o.bottom,d=Math.max(o.bottom,u)+5,g=d-l,b=c-f,A=`polygon(0% 0%, 100% 0%, ${b}px 100%)`;break;case"down":f=Math.min(c,o.left)-x,v=Math.max(c,o.right)+x,m=v-f,l=Math.min(o.top,u)-5,d=o.top,g=d-l,b=c-f,A=`polygon(${b}px 0%, 100% 100%, 0% 100%)`;break}n.style.left=`${f}px`,n.style.top=`${l}px`,n.style.width=`${m}px`,n.style.height=`${g}px`,n.style.clipPath=A};return{safeArea:n,redraw:(c,u)=>{n.isConnected||i.appendChild(n),a(c,u)},remove:()=>{n.remove()}}}function ci(i,t,e,s){return!ui(i,e,s)&&!hi(t,e,s)}function ui(i,t,e){return i.left<=t&&t<=i.right&&i.top<=e&&e<=i.bottom}function hi(i,t,e){return i.left<=t&&t<=i.right&&i.top<=e&&e<=i.bottom}function h(i,t,e){i._durableAttributeObserver===void 0&&(i._durableAttributeObserver=ke(i,[t])),i._durableAttributeObserver.hasAttribute(t)||i._durableAttributeObserver.addAttribute(t),i._durableAttributeObserver.pause(()=>{i.setAttribute(t,e)})}function Ut(i,t){y(i,t),fi(i,t)}function y(i,t){i._durableAttributeObserver===void 0&&(i._durableAttributeObserver=ke(i,[t])),i._durableAttributeObserver.hasAttribute(t)||i._durableAttributeObserver.addAttribute(t),i._durableAttributeObserver.pause(()=>{i.removeAttribute(t)})}function fi(i,t){i?._durableAttributeObserver?.hasAttribute(t)&&i._durableAttributeObserver.releaseAttribute(t)}function ke(i,t){let e=n=>{n.forEach(o=>{o.oldValue===null?i._durableAttributeObserver.pause(()=>y(i,o.attributeName)):i._durableAttributeObserver.pause(()=>h(i,o.attributeName,o.oldValue))})},s=new MutationObserver(n=>e(n));return s.observe(i,{attributeFilter:t,attributeOldValue:!0}),{attributes:t,hasAttribute(n){return this.attributes.includes(n)},addAttribute(n){this.attributes.includes(n)||this.attributes.push(n),s.observe(i,{attributeFilter:this.attributes,attributeOldValue:!0})},releaseAttribute(n){this.hasAttribute(n)&&s.observe(i,{attributeFilter:this.attributes,attributeOldValue:!0})},pause(n){e(s.takeRecords()),s.disconnect(),n(),s.observe(i,{attributeFilter:this.attributes,attributeOldValue:!0})}}}function di(){return{safeArea:{contains:()=>!1},redraw:()=>{},remove:()=>{}}}var S=class extends HTMLElement{constructor(){super(),this.boot?.()}connectedCallback(){queueMicrotask(()=>{this.mount?.()})}mixin(t,e={}){return new t(this,e)}appendMixin(t,e={}){return new t(this,e)}use(t){let e;return this.mixins.forEach(s=>{s instanceof t&&(e=s)}),e}uses(t){let e;return this.mixins.forEach(s=>{s instanceof t&&(e=!0)}),!!e}on(t,e){return w(this,t,e)}root(t,e={}){if(t===void 0)return this.__root;let s=document.createElement(t);for(let o in e)setAttribute(s,o,e[o]);let n=this.attachShadow({mode:"open"});return s.appendChild(document.createElement("slot")),n.appendChild(s),this.__root=s,this.__root}},Rt=class extends S{};var O=class{constructor(t,e={}){this.el=t,this.grouped=e.grouped===void 0,this.el.mixins=this.el.mixins?this.el.mixins:new Map,this.el.mixins.set(this.constructor.name,this),this.el[this.constructor.name]=!0,this.el.use||(this.el.use=S.prototype.use.bind(this.el)),this.opts=e,this.boot?.({options:s=>{let n=s;Object.entries(this.opts).forEach(([o,r])=>{r!==void 0&&(n[o]=r)}),this.opts=n}}),queueMicrotask(()=>{this.mount?.()})}options(){return this.opts}hasGroup(){return!!this.group()}group(){if(this.grouped!==!1)return ye(this.el,t=>t[this.groupedByType.name])?.use(this.groupedByType)}on(t,e){return w(this.el,t,e)}},H=class extends O{constructor(t,e={}){super(t,e)}walker(){return W(this.el,(t,{skip:e,reject:s})=>{if(t[this.constructor.name]&&t!==this.el)return s();if(!t[this.groupOfType.name]||!t.mixins.get(this.groupOfType.name).grouped)return e()})}};var $=class extends O{boot({options:t}){this.initialState=this.el.value,this.getterFunc=()=>{},this.setterFunc=e=>this.initialState=e,Object.defineProperty(this.el,"value",{get:()=>this.getterFunc(),set:e=>{this.setterFunc(e)}})}initial(t){t(this.initialState)}getter(t){this.getterFunc=t}setter(t){this.setterFunc=t}dispatch(){this.el.dispatchEvent(new Event("input",{bubbles:!1,cancelable:!0})),this.el.dispatchEvent(new Event("change",{bubbles:!1,cancelable:!0}))}};var Yt=new Set,R=class extends O{boot({options:t}){t({trigger:null}),h(this.el,"popover","manual"),this.trigger=this.options().trigger,this.onChanges=[],this.state=!1,w(this.el,"beforetoggle",e=>{let s=this.state;if(this.state=e.newState==="open",this.state){pi(this.el,Yt);let n=new AbortController,o=document.activeElement;setTimeout(()=>{bi(this.el,o,n),mi(this.el,o,n),gi(this.el,o,n)}),this.el.addEventListener("beforetoggle",r=>{r.newState==="closed"&&(n.abort(),o.focus())},{signal:n.signal})}s!==this.state&&this.onChanges.forEach(n=>n(this.state,s))}),w(this.el,"toggle",e=>{e.newState==="open"&&Yt.add(this.el),e.newState==="closed"&&Yt.delete(this.el)})}onChange(t){this.onChanges.push(t)}setState(t){t?this.show():this.hide()}getState(){return this.state}toggle(){this.el.togglePopover()}show(){this.el.showPopover()}hide(){this.el.hidePopover()}};function pi(i,t){t.forEach(e=>{i.contains(e)||e.contains(i)||e.hidePopover()})}function bi(i,t,e){document.addEventListener("click",s=>{i.contains(s.target)||t===s.target||i.hidePopover()},{signal:e.signal})}function mi(i,t,e){document.addEventListener("focusin",s=>{i.contains(s.target)||t===s.target||(e.abort(),i.hidePopover())},{capture:!0,signal:e.signal})}function gi(i,t,e){document.addEventListener("keydown",s=>{s.key==="Escape"&&i.hidePopover()},{signal:e.signal})}var z=Math.min,L=Math.max,xt=Math.round,yt=Math.floor,U=i=>({x:i,y:i}),vi={left:"right",right:"left",bottom:"top",top:"bottom"},wi={start:"end",end:"start"};function Xt(i,t,e){return L(i,z(t,e))}function ft(i,t){return typeof i=="function"?i(t):i}function Y(i){return i.split("-")[0]}function dt(i){return i.split("-")[1]}function Gt(i){return i==="x"?"y":"x"}function Kt(i){return i==="y"?"height":"width"}function et(i){return["top","bottom"].includes(Y(i))?"y":"x"}function Zt(i){return Gt(et(i))}function Ee(i,t,e){e===void 0&&(e=!1);let s=dt(i),n=Zt(i),o=Kt(n),r=n==="x"?s===(e?"end":"start")?"right":"left":s==="start"?"bottom":"top";return t.reference[o]>t.floating[o]&&(r=At(r)),[r,At(r)]}function Ce(i){let t=At(i);return[Dt(i),t,Dt(t)]}function Dt(i){return i.replace(/start|end/g,t=>wi[t])}function Ai(i,t,e){let s=["left","right"],n=["right","left"],o=["top","bottom"],r=["bottom","top"];switch(i){case"top":case"bottom":return e?t?n:s:t?s:n;case"left":case"right":return t?o:r;default:return[]}}function Oe(i,t,e,s){let n=dt(i),o=Ai(Y(i),e==="start",s);return n&&(o=o.map(r=>r+"-"+n),t&&(o=o.concat(o.map(Dt)))),o}function At(i){return i.replace(/left|right|bottom|top/g,t=>vi[t])}function xi(i){return{top:0,right:0,bottom:0,left:0,...i}}function Pe(i){return typeof i!="number"?xi(i):{top:i,right:i,bottom:i,left:i}}function ot(i){let{x:t,y:e,width:s,height:n}=i;return{width:s,height:n,top:e,left:t,right:t+s,bottom:e+n,x:t,y:e}}function Te(i,t,e){let{reference:s,floating:n}=i,o=et(t),r=Zt(t),a=Kt(r),c=Y(t),u=o==="y",p=s.x+s.width/2-n.width/2,f=s.y+s.height/2-n.height/2,v=s[a]/2-n[a]/2,m;switch(c){case"top":m={x:p,y:s.y-n.height};break;case"bottom":m={x:p,y:s.y+s.height};break;case"right":m={x:s.x+s.width,y:f};break;case"left":m={x:s.x-n.width,y:f};break;default:m={x:s.x,y:s.y}}switch(dt(t)){case"start":m[r]-=v*(e&&u?-1:1);break;case"end":m[r]+=v*(e&&u?-1:1);break}return m}var Le=async(i,t,e)=>{let{placement:s="bottom",strategy:n="absolute",middleware:o=[],platform:r}=e,a=o.filter(Boolean),c=await(r.isRTL==null?void 0:r.isRTL(t)),u=await r.getElementRects({reference:i,floating:t,strategy:n}),{x:p,y:f}=Te(u,s,c),v=s,m={},l=0;for(let d=0;d<a.length;d++){let{name:g,fn:b}=a[d],{x:A,y:x,data:_,reset:k}=await b({x:p,y:f,initialPlacement:s,placement:v,strategy:n,middlewareData:m,rects:u,platform:r,elements:{reference:i,floating:t}});p=A??p,f=x??f,m={...m,[g]:{...m[g],..._}},k&&l<=50&&(l++,typeof k=="object"&&(k.placement&&(v=k.placement),k.rects&&(u=k.rects===!0?await r.getElementRects({reference:i,floating:t,strategy:n}):k.rects),{x:p,y:f}=Te(u,v,c)),d=-1)}return{x:p,y:f,placement:v,strategy:n,middlewareData:m}};async function Nt(i,t){var e;t===void 0&&(t={});let{x:s,y:n,platform:o,rects:r,elements:a,strategy:c}=i,{boundary:u="clippingAncestors",rootBoundary:p="viewport",elementContext:f="floating",altBoundary:v=!1,padding:m=0}=ft(t,i),l=Pe(m),g=a[v?f==="floating"?"reference":"floating":f],b=ot(await o.getClippingRect({element:(e=await(o.isElement==null?void 0:o.isElement(g)))==null||e?g:g.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(a.floating)),boundary:u,rootBoundary:p,strategy:c})),A=f==="floating"?{x:s,y:n,width:r.floating.width,height:r.floating.height}:r.reference,x=await(o.getOffsetParent==null?void 0:o.getOffsetParent(a.floating)),_=await(o.isElement==null?void 0:o.isElement(x))?await(o.getScale==null?void 0:o.getScale(x))||{x:1,y:1}:{x:1,y:1},k=ot(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:A,offsetParent:x,strategy:c}):A);return{top:(b.top-k.top+l.top)/_.y,bottom:(k.bottom-b.bottom+l.bottom)/_.y,left:(b.left-k.left+l.left)/_.x,right:(k.right-b.right+l.right)/_.x}}var Fe=function(i){return i===void 0&&(i={}),{name:"flip",options:i,async fn(t){var e,s;let{placement:n,middlewareData:o,rects:r,initialPlacement:a,platform:c,elements:u}=t,{mainAxis:p=!0,crossAxis:f=!0,fallbackPlacements:v,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:l="none",flipAlignment:d=!0,...g}=ft(i,t);if((e=o.arrow)!=null&&e.alignmentOffset)return{};let b=Y(n),A=et(a),x=Y(a)===a,_=await(c.isRTL==null?void 0:c.isRTL(u.floating)),k=v||(x||!d?[At(a)]:Ce(a)),V=l!=="none";!v&&V&&k.push(...Oe(a,d,l,_));let Ft=[a,...k],ct=await Nt(t,g),st=[],Z=((s=o.flip)==null?void 0:s.overflows)||[];if(p&&st.push(ct[b]),f){let nt=Ee(n,r,_);st.push(ct[nt[0]],ct[nt[1]])}if(Z=[...Z,{placement:n,overflows:st}],!st.every(nt=>nt<=0)){var vt,we;let nt=(((vt=o.flip)==null?void 0:vt.index)||0)+1,xe=Ft[nt];if(xe)return{data:{index:nt,overflows:Z},reset:{placement:xe}};let wt=(we=Z.filter(ut=>ut.overflows[0]<=0).sort((ut,J)=>ut.overflows[1]-J.overflows[1])[0])==null?void 0:we.placement;if(!wt)switch(m){case"bestFit":{var Ae;let ut=(Ae=Z.filter(J=>{if(V){let Q=et(J.placement);return Q===A||Q==="y"}return!0}).map(J=>[J.placement,J.overflows.filter(Q=>Q>0).reduce((Q,ni)=>Q+ni,0)]).sort((J,Q)=>J[1]-Q[1])[0])==null?void 0:Ae[0];ut&&(wt=ut);break}case"initialPlacement":wt=a;break}if(n!==wt)return{reset:{placement:wt}}}return{}}}};async function yi(i,t){let{placement:e,platform:s,elements:n}=i,o=await(s.isRTL==null?void 0:s.isRTL(n.floating)),r=Y(e),a=dt(e),c=et(e)==="y",u=["left","top"].includes(r)?-1:1,p=o&&c?-1:1,f=ft(t,i),{mainAxis:v,crossAxis:m,alignmentAxis:l}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...f};return a&&typeof l=="number"&&(m=a==="end"?l*-1:l),c?{x:m*p,y:v*u}:{x:v*u,y:m*p}}var Me=function(i){return i===void 0&&(i=0),{name:"offset",options:i,async fn(t){var e,s;let{x:n,y:o,placement:r,middlewareData:a}=t,c=await yi(t,i);return r===((e=a.offset)==null?void 0:e.placement)&&(s=a.arrow)!=null&&s.alignmentOffset?{}:{x:n+c.x,y:o+c.y,data:{...c,placement:r}}}}},Re=function(i){return i===void 0&&(i={}),{name:"shift",options:i,async fn(t){let{x:e,y:s,placement:n}=t,{mainAxis:o=!0,crossAxis:r=!1,limiter:a={fn:g=>{let{x:b,y:A}=g;return{x:b,y:A}}},...c}=ft(i,t),u={x:e,y:s},p=await Nt(t,c),f=et(Y(n)),v=Gt(f),m=u[v],l=u[f];if(o){let g=v==="y"?"top":"left",b=v==="y"?"bottom":"right",A=m+p[g],x=m-p[b];m=Xt(A,m,x)}if(r){let g=f==="y"?"top":"left",b=f==="y"?"bottom":"right",A=l+p[g],x=l-p[b];l=Xt(A,l,x)}let d=a.fn({...t,[v]:m,[f]:l});return{...d,data:{x:d.x-e,y:d.y-s}}}}};var De=function(i){return i===void 0&&(i={}),{name:"size",options:i,async fn(t){let{placement:e,rects:s,platform:n,elements:o}=t,{apply:r=()=>{},...a}=ft(i,t),c=await Nt(t,a),u=Y(e),p=dt(e),f=et(e)==="y",{width:v,height:m}=s.floating,l,d;u==="top"||u==="bottom"?(l=u,d=p===(await(n.isRTL==null?void 0:n.isRTL(o.floating))?"start":"end")?"left":"right"):(d=u,l=p==="end"?"top":"bottom");let g=m-c.top-c.bottom,b=v-c.left-c.right,A=z(m-c[l],g),x=z(v-c[d],b),_=!t.middlewareData.shift,k=A,V=x;if(f?V=p||_?z(x,b):b:k=p||_?z(A,g):g,_&&!p){let ct=L(c.left,0),st=L(c.right,0),Z=L(c.top,0),vt=L(c.bottom,0);f?V=v-2*(ct!==0||st!==0?ct+st:L(c.left,c.right)):k=m-2*(Z!==0||vt!==0?Z+vt:L(c.top,c.bottom))}await r({...t,availableWidth:V,availableHeight:k});let Ft=await n.getDimensions(o.floating);return v!==Ft.width||m!==Ft.height?{reset:{rects:!0}}:{}}}};function rt(i){return Ie(i)?(i.nodeName||"").toLowerCase():"#document"}function F(i){var t;return(i==null||(t=i.ownerDocument)==null?void 0:t.defaultView)||window}function j(i){var t;return(t=(Ie(i)?i.ownerDocument:i.document)||window.document)==null?void 0:t.documentElement}function Ie(i){return i instanceof Node||i instanceof F(i).Node}function D(i){return i instanceof Element||i instanceof F(i).Element}function B(i){return i instanceof HTMLElement||i instanceof F(i).HTMLElement}function Ne(i){return typeof ShadowRoot>"u"?!1:i instanceof ShadowRoot||i instanceof F(i).ShadowRoot}function bt(i){let{overflow:t,overflowX:e,overflowY:s,display:n}=N(i);return/auto|scroll|overlay|hidden|clip/.test(t+s+e)&&!["inline","contents"].includes(n)}function We(i){return["table","td","th"].includes(rt(i))}function _t(i){return[":popover-open",":modal"].some(t=>{try{return i.matches(t)}catch{return!1}})}function It(i){let t=Wt(),e=D(i)?N(i):i;return e.transform!=="none"||e.perspective!=="none"||(e.containerType?e.containerType!=="normal":!1)||!t&&(e.backdropFilter?e.backdropFilter!=="none":!1)||!t&&(e.filter?e.filter!=="none":!1)||["transform","perspective","filter"].some(s=>(e.willChange||"").includes(s))||["paint","layout","strict","content"].some(s=>(e.contain||"").includes(s))}function Be(i){let t=X(i);for(;B(t)&&!lt(t);){if(It(t))return t;if(_t(t))return null;t=X(t)}return null}function Wt(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function lt(i){return["html","body","#document"].includes(rt(i))}function N(i){return F(i).getComputedStyle(i)}function St(i){return D(i)?{scrollLeft:i.scrollLeft,scrollTop:i.scrollTop}:{scrollLeft:i.scrollX,scrollTop:i.scrollY}}function X(i){if(rt(i)==="html")return i;let t=i.assignedSlot||i.parentNode||Ne(i)&&i.host||j(i);return Ne(t)?t.host:t}function Ve(i){let t=X(i);return lt(t)?i.ownerDocument?i.ownerDocument.body:i.body:B(t)&&bt(t)?t:Ve(t)}function pt(i,t,e){var s;t===void 0&&(t=[]),e===void 0&&(e=!0);let n=Ve(i),o=n===((s=i.ownerDocument)==null?void 0:s.body),r=F(n);if(o){let a=Bt(r);return t.concat(r,r.visualViewport||[],bt(n)?n:[],a&&e?pt(a):[])}return t.concat(n,pt(n,[],e))}function Bt(i){return i.parent&&Object.getPrototypeOf(i.parent)?i.frameElement:null}function $e(i){let t=N(i),e=parseFloat(t.width)||0,s=parseFloat(t.height)||0,n=B(i),o=n?i.offsetWidth:e,r=n?i.offsetHeight:s,a=xt(e)!==o||xt(s)!==r;return a&&(e=o,s=r),{width:e,height:s,$:a}}function Qt(i){return D(i)?i:i.contextElement}function mt(i){let t=Qt(i);if(!B(t))return U(1);let e=t.getBoundingClientRect(),{width:s,height:n,$:o}=$e(t),r=(o?xt(e.width):e.width)/s,a=(o?xt(e.height):e.height)/n;return(!r||!Number.isFinite(r))&&(r=1),(!a||!Number.isFinite(a))&&(a=1),{x:r,y:a}}var _i=U(0);function ze(i){let t=F(i);return!Wt()||!t.visualViewport?_i:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function Si(i,t,e){return t===void 0&&(t=!1),!e||t&&e!==F(i)?!1:t}function at(i,t,e,s){t===void 0&&(t=!1),e===void 0&&(e=!1);let n=i.getBoundingClientRect(),o=Qt(i),r=U(1);t&&(s?D(s)&&(r=mt(s)):r=mt(i));let a=Si(o,e,s)?ze(o):U(0),c=(n.left+a.x)/r.x,u=(n.top+a.y)/r.y,p=n.width/r.x,f=n.height/r.y;if(o){let v=F(o),m=s&&D(s)?F(s):s,l=v,d=Bt(l);for(;d&&s&&m!==l;){let g=mt(d),b=d.getBoundingClientRect(),A=N(d),x=b.left+(d.clientLeft+parseFloat(A.paddingLeft))*g.x,_=b.top+(d.clientTop+parseFloat(A.paddingTop))*g.y;c*=g.x,u*=g.y,p*=g.x,f*=g.y,c+=x,u+=_,l=F(d),d=Bt(l)}}return ot({width:p,height:f,x:c,y:u})}function ki(i){let{elements:t,rect:e,offsetParent:s,strategy:n}=i,o=n==="fixed",r=j(s),a=t?_t(t.floating):!1;if(s===r||a&&o)return e;let c={scrollLeft:0,scrollTop:0},u=U(1),p=U(0),f=B(s);if((f||!f&&!o)&&((rt(s)!=="body"||bt(r))&&(c=St(s)),B(s))){let v=at(s);u=mt(s),p.x=v.x+s.clientLeft,p.y=v.y+s.clientTop}return{width:e.width*u.x,height:e.height*u.y,x:e.x*u.x-c.scrollLeft*u.x+p.x,y:e.y*u.y-c.scrollTop*u.y+p.y}}function Ei(i){return Array.from(i.getClientRects())}function je(i){return at(j(i)).left+St(i).scrollLeft}function Ci(i){let t=j(i),e=St(i),s=i.ownerDocument.body,n=L(t.scrollWidth,t.clientWidth,s.scrollWidth,s.clientWidth),o=L(t.scrollHeight,t.clientHeight,s.scrollHeight,s.clientHeight),r=-e.scrollLeft+je(i),a=-e.scrollTop;return N(s).direction==="rtl"&&(r+=L(t.clientWidth,s.clientWidth)-n),{width:n,height:o,x:r,y:a}}function Oi(i,t){let e=F(i),s=j(i),n=e.visualViewport,o=s.clientWidth,r=s.clientHeight,a=0,c=0;if(n){o=n.width,r=n.height;let u=Wt();(!u||u&&t==="fixed")&&(a=n.offsetLeft,c=n.offsetTop)}return{width:o,height:r,x:a,y:c}}function Pi(i,t){let e=at(i,!0,t==="fixed"),s=e.top+i.clientTop,n=e.left+i.clientLeft,o=B(i)?mt(i):U(1),r=i.clientWidth*o.x,a=i.clientHeight*o.y,c=n*o.x,u=s*o.y;return{width:r,height:a,x:c,y:u}}function qe(i,t,e){let s;if(t==="viewport")s=Oi(i,e);else if(t==="document")s=Ci(j(i));else if(D(t))s=Pi(t,e);else{let n=ze(i);s={...t,x:t.x-n.x,y:t.y-n.y}}return ot(s)}function Ue(i,t){let e=X(i);return e===t||!D(e)||lt(e)?!1:N(e).position==="fixed"||Ue(e,t)}function Ti(i,t){let e=t.get(i);if(e)return e;let s=pt(i,[],!1).filter(a=>D(a)&&rt(a)!=="body"),n=null,o=N(i).position==="fixed",r=o?X(i):i;for(;D(r)&&!lt(r);){let a=N(r),c=It(r);!c&&a.position==="fixed"&&(n=null),(o?!c&&!n:!c&&a.position==="static"&&!!n&&["absolute","fixed"].includes(n.position)||bt(r)&&!c&&Ue(i,r))?s=s.filter(p=>p!==r):n=a,r=X(r)}return t.set(i,s),s}function Li(i){let{element:t,boundary:e,rootBoundary:s,strategy:n}=i,r=[...e==="clippingAncestors"?_t(t)?[]:Ti(t,this._c):[].concat(e),s],a=r[0],c=r.reduce((u,p)=>{let f=qe(t,p,n);return u.top=L(f.top,u.top),u.right=z(f.right,u.right),u.bottom=z(f.bottom,u.bottom),u.left=L(f.left,u.left),u},qe(t,a,n));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function Fi(i){let{width:t,height:e}=$e(i);return{width:t,height:e}}function Mi(i,t,e){let s=B(t),n=j(t),o=e==="fixed",r=at(i,!0,o,t),a={scrollLeft:0,scrollTop:0},c=U(0);if(s||!s&&!o)if((rt(t)!=="body"||bt(n))&&(a=St(t)),s){let f=at(t,!0,o,t);c.x=f.x+t.clientLeft,c.y=f.y+t.clientTop}else n&&(c.x=je(n));let u=r.left+a.scrollLeft-c.x,p=r.top+a.scrollTop-c.y;return{x:u,y:p,width:r.width,height:r.height}}function Jt(i){return N(i).position==="static"}function He(i,t){return!B(i)||N(i).position==="fixed"?null:t?t(i):i.offsetParent}function Ye(i,t){let e=F(i);if(_t(i))return e;if(!B(i)){let n=X(i);for(;n&&!lt(n);){if(D(n)&&!Jt(n))return n;n=X(n)}return e}let s=He(i,t);for(;s&&We(s)&&Jt(s);)s=He(s,t);return s&&lt(s)&&Jt(s)&&!It(s)?e:s||Be(i)||e}var Ri=async function(i){let t=this.getOffsetParent||Ye,e=this.getDimensions,s=await e(i.floating);return{reference:Mi(i.reference,await t(i.floating),i.strategy),floating:{x:0,y:0,width:s.width,height:s.height}}};function Di(i){return N(i).direction==="rtl"}var Ni={convertOffsetParentRelativeRectToViewportRelativeRect:ki,getDocumentElement:j,getClippingRect:Li,getOffsetParent:Ye,getElementRects:Ri,getClientRects:Ei,getDimensions:Fi,getScale:mt,isElement:D,isRTL:Di};function Ii(i,t){let e=null,s,n=j(i);function o(){var a;clearTimeout(s),(a=e)==null||a.disconnect(),e=null}function r(a,c){a===void 0&&(a=!1),c===void 0&&(c=1),o();let{left:u,top:p,width:f,height:v}=i.getBoundingClientRect();if(a||t(),!f||!v)return;let m=yt(p),l=yt(n.clientWidth-(u+f)),d=yt(n.clientHeight-(p+v)),g=yt(u),A={rootMargin:-m+"px "+-l+"px "+-d+"px "+-g+"px",threshold:L(0,z(1,c))||1},x=!0;function _(k){let V=k[0].intersectionRatio;if(V!==c){if(!x)return r();V?r(!1,V):s=setTimeout(()=>{r(!1,1e-7)},1e3)}x=!1}try{e=new IntersectionObserver(_,{...A,root:n.ownerDocument})}catch{e=new IntersectionObserver(_,A)}e.observe(i)}return r(!0),o}function Xe(i,t,e,s){s===void 0&&(s={});let{ancestorScroll:n=!0,ancestorResize:o=!0,elementResize:r=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:c=!1}=s,u=Qt(i),p=n||o?[...u?pt(u):[],...pt(t)]:[];p.forEach(b=>{n&&b.addEventListener("scroll",e,{passive:!0}),o&&b.addEventListener("resize",e)});let f=u&&a?Ii(u,e):null,v=-1,m=null;r&&(m=new ResizeObserver(b=>{let[A]=b;A&&A.target===u&&m&&(m.unobserve(t),cancelAnimationFrame(v),v=requestAnimationFrame(()=>{var x;(x=m)==null||x.observe(t)})),e()}),u&&!c&&m.observe(u),m.observe(t));let l,d=c?at(i):null;c&&g();function g(){let b=at(i);d&&(b.x!==d.x||b.y!==d.y||b.width!==d.width||b.height!==d.height)&&e(),d=b,l=requestAnimationFrame(g)}return e(),()=>{var b;p.forEach(A=>{n&&A.removeEventListener("scroll",e),o&&A.removeEventListener("resize",e)}),f?.(),(b=m)==null||b.disconnect(),m=null,c&&cancelAnimationFrame(l)}}var Ge=Me;var Ke=Re,Ze=Fe,Je=De;var Qe=(i,t,e)=>{let s=new Map,n={platform:Ni,...e},o={...n.platform,_c:s};return Le(i,t,{...n,platform:o})};var I=class extends O{boot({options:t}){if(t({reference:null,auto:!0,position:"bottom start",gap:"5",offset:"0",matchWidth:!1}),this.options().reference===null||this.options().position===null)return;let[e,s]=Vi(this.el),n=Wi(this.el,this.options().reference,e,{position:this.options().position,gap:this.options().gap,offset:this.options().offset,matchWidth:this.options().matchWidth}),o=()=>{};this.reposition=(...r)=>{this.options().auto?o=Xe(this.options().reference,this.el,n,{ancestorScroll:!0,ancestorResize:!0,elementResize:!0,layoutShift:!0,animationFrame:!0}):n(...r)},this.cleanup=()=>{o(),s()}}};function Wi(i,t,e,{position:s,offset:n,gap:o,matchWidth:r}){return(a=null,c=null)=>{Qe(t,i,{placement:Bi(s),middleware:[Ze(),Ke({padding:5,crossAxis:!0}),Ge({mainAxis:Number(o),alignmentAxis:Number(n)}),r?Je({apply({rects:u,elements:p}){Object.assign(p.floating.style,{width:`${u.reference.width}px`})}}):void 0]}).then(({x:u,y:p})=>{e(a||u,c||p)})}}function Bi(i){return i.split(" ").join("-")}function Vi(i){let t=(o,r)=>{Object.assign(i.style,{position:"absolute",inset:`${r}px auto auto ${o}px`})},e,s,n=new MutationObserver(()=>t(e,s));return[(o,r)=>{e=o,s=r,n.disconnect(),t(e,s),n.observe(i,{attributeFilter:["style"]})},()=>{n.disconnect()}]}var te=class extends S{boot(){let t=this.trigger(),e=this.overlay();if(t){if(!e)return console.warn("ui-dropdown: no [popover] overlay found",this)}else return console.warn("ui-dropdown: no trigger element found",this);this._disabled=this.hasAttribute("disabled"),this._controllable=new $(this),e._popoverable=new R(e),e._anchorable=new I(e,{reference:t,position:this.hasAttribute("position")?this.getAttribute("position"):void 0,gap:this.hasAttribute("gap")?this.getAttribute("gap"):void 0,offset:this.hasAttribute("offset")?this.getAttribute("offset"):void 0}),e._popoverable.onChange(()=>{e._popoverable.getState()?e._anchorable.reposition():e._anchorable.cleanup()}),this._controllable.initial(o=>e._popoverable.setState(o)),this._controllable.getter(()=>e._popoverable.getState());let s=tt();this._controllable.setter(o=>e._popoverable.setState(o)),e._popoverable.onChange(s(()=>this._controllable.dispatch())),this.hasAttribute("hover")&&ht(t,e,{gain(){e._popoverable.setState(!0)},lose(){e._popoverable.setState(!1)},focusable:!0}),w(t,"click",()=>e._popoverable.toggle()),e._popoverable.getState()?(h(this,"data-open",""),h(t,"data-open",""),h(e,"data-open","")):(y(this,"data-open"),y(t,"data-open"),y(e,"data-open")),e._popoverable.onChange(()=>{e._popoverable.getState()?(h(this,"data-open",""),h(t,"data-open",""),h(e,"data-open","")):(y(this,"data-open"),y(t,"data-open"),y(e,"data-open"))});let n=M(e,"dropdown");h(t,"aria-haspopup","true"),h(t,"aria-controls",n),h(t,"aria-expanded",e._popoverable.getState()?"true":"false"),e._popoverable.onChange(()=>{h(t,"aria-expanded",e._popoverable.getState()?"true":"false")}),e._popoverable.onChange(()=>{e._popoverable.getState()?e.onPopoverShow?.():e.onPopoverHide?.()})}trigger(){return this.querySelector("button")}overlay(){return this.lastElementChild?.matches("[popover]")&&this.lastElementChild}};C("dropdown",te);var ee=class extends S{boot(){let t=this.hasAttribute("label")?"label":"description",e=this.button(),s=this.overlay();if(e){if(!s)return}else return console.warn("ui-tooltip: no trigger element found",this);this._disabled=this.hasAttribute("disabled"),s._popoverable=new R(s),s._anchorable=new I(s,{reference:e,position:this.hasAttribute("position")?this.getAttribute("position"):void 0,gap:this.hasAttribute("gap")?this.getAttribute("gap"):void 0,offset:this.hasAttribute("offset")?this.getAttribute("offset"):void 0}),s._popoverable.onChange(()=>s._anchorable.reposition()),this._disabled||ht(e,s,{gain(){s._popoverable.setState(!0)},lose(){s._popoverable.setState(!1)},focusable:!0,useSafeArea:!1});let n=M(s,"tooltip");h(e,"aria-controls",n),h(e,"aria-expanded","false"),s._popoverable.onChange(()=>{s._popoverable.getState()?h(e,"aria-expanded","true"):h(e,"aria-expanded","false")}),t==="label"?h(e,"aria-labelledby",n):h(e,"aria-describedby",n),h(s,"role","tooltip")}button(){return this.firstElementChild}overlay(){return this.lastElementChild!==this.button()&&this.lastElementChild}};C("tooltip",ee);var it=class extends H{groupOfType=E;boot({options:t}){t({multiple:!1}),this.state=this.options().multiple?new Set:null,this.onChanges=[]}onInitAndChange(t){t(),this.onChanges.push(t)}onChange(t){this.onChanges.push(t)}changed(t,e=!1){if(t.ungrouped)return;let s=t.value,n=t.isSelected(),o=this.options().multiple;n?o?this.state.add(s):this.state=s:o?this.state.delete(s):this.state=null,e||this.onChanges.forEach(r=>r())}getState(){return this.options().multiple?Array.from(this.state):this.state}hasValue(t){return this.options().multiple?this.state.has(t):this.state===t}setState(t){t===null&&(t=this.multiple?[]:""),t=this.options().multiple?(t||[]).map(s=>s+""):t+"",this.state=this.options().multiple?new Set(t):t;let e=this.options().multiple?t:[t];this.walker().each(s=>{let n=s.use(E);if(n.ungrouped)return;let o=e.includes(n.value);o&&!n.isSelected()?n.surgicallySelect():!o&&n.isSelected()&&n.surgicallyDeselect()}),this.onChanges.forEach(s=>s())}selected(){return this.walker().find(t=>t.use(E).isSelected()).use(E)}selecteds(){return this.walker().filter(t=>t.use(E).isSelected()).map(t=>t.use(E))}selectFirst(){this.walker().first()?.use(E).select()}selectAll(){this.walker().filter(t=>!t.use(E).isSelected()).map(t=>t.use(E).select())}deselectAll(){this.walker().filter(t=>t.use(E).isSelected()).map(t=>t.use(E).deselect())}allAreSelected(){return this.walker().filter(t=>t.use(E).isSelected()).length===this.walker().filter(t=>!0).length}noneAreSelected(){return this.state===null||this.state?.size===0}selectableByValue(t){return this.walker().find(e=>e.use(E).value===t)?.use(E)}deselectOthers(t){this.walker().each(e=>{e!==t&&e.use(E).surgicallyDeselect()})}selectedTextValue(){return this.options().multiple?Array.from(this.state).map(t=>this.convertValueStringToElementText(t)).join(", "):this.convertValueStringToElementText(this.state)}convertValueStringToElementText(t){let e=this.findByValue(t);return e?e.label||e.value:t}findByValue(t){return this.selecteds().find(e=>e.value===t)}walker(){return W(this.el,(t,{skip:e,reject:s})=>{if(t[this.constructor.name]&&t!==this.el)return s();if(!t[this.groupOfType.name]||t.mixins.get(this.groupOfType.name).ungrouped)return e()})}},E=class extends O{boot({options:t}){this.groupedByType=it,t({ungrouped:!1,togglable:!1,value:void 0,label:void 0,selectedInitially:!1,dataAttr:"data-selected",ariaAttr:"aria-selected"}),this.ungrouped=this.options().ungrouped,this.value=this.options().value===void 0?this.el.value:this.options().value,this.value=this.value+"",this.label=this.options().label;let e=this.options().selectedInitially;this.group()&&this.group().hasValue(this.value)&&(e=!0),this.multiple=this.hasGroup()?this.group().options().multiple:!1,this.toggleable=this.options().toggleable||this.multiple,this.onSelects=[],this.onUnselects=[],this.onChanges=[],e?this.select(!0):(this.state=e,this.surgicallyDeselect(!0))}mount(){this.el.hasAttribute(this.options().ariaAttr)||h(this.el,this.options().ariaAttr,"false")}onChange(t){this.onChanges.push(t)}onSelect(t){this.onSelects.push(t)}onUnselect(t){this.onUnselects.push(t)}setState(t){t?this.select():this.deselect()}getState(){return this.state}press(){this.toggleable?this.toggle():this.select()}trigger(){this.toggleable?this.toggle():this.select()}toggle(){this.isSelected()?this.deselect():this.select()}isSelected(){return this.state}select(t=!1){let e=!this.isSelected();this.toggleable||this.group()?.deselectOthers(this.el),this.state=!0,h(this.el,this.options().ariaAttr,"true"),h(this.el,this.options().dataAttr,""),e&&(t||(this.onSelects.forEach(s=>s()),this.onChanges.forEach(s=>s())),this.group()?.changed(this,t))}surgicallySelect(){let t=!this.isSelected();this.state=!0,h(this.el,this.options().ariaAttr,"true"),h(this.el,this.options().dataAttr,""),t&&(this.onSelects.forEach(e=>e()),this.onChanges.forEach(e=>e()))}deselect(t=!0){let e=this.isSelected();this.state=!1,h(this.el,this.options().ariaAttr,"false"),y(this.el,this.options().dataAttr),e&&(this.onUnselects.forEach(s=>s()),this.onChanges.forEach(s=>s()),t&&this.group()?.changed(this))}surgicallyDeselect(t=!1){let e=this.isSelected();this.state=!1,h(this.el,this.options().ariaAttr,"false"),y(this.el,this.options().dataAttr),e&&!t&&(this.onUnselects.forEach(s=>s()),this.onChanges.forEach(s=>s()))}getValue(){return this.value}getLabel(){return this.label}};var gt=class extends H{groupOfType=T;boot({options:t}){t({wrap:!1,ensureTabbable:!0})}mount(){this.options().ensureTabbable&&this.ensureTabbable()}focusFirst(){let t;t=t||this.walker().find(e=>e.hasAttribute("autofocus")),t=t||this.walker().find(e=>e.getAttribute("tabindex")==="0"),t=t||this.walker().find(e=>e.getAttribute("tabindex")==="-1"),t=t||this.walker().find(e=>_e(e)),t?.focus()}focusPrev(){this.moveFocus(t=>this.options().wrap?this.walker().prevOrLast(t):this.walker().prev(t))}focusNext(){this.moveFocus(t=>this.options().wrap?this.walker().nextOrFirst(t):this.walker().next(t))}focusBySearch(t){let e=this.walker().find(s=>s.textContent.toLowerCase().trim().startsWith(t.toLowerCase()));e?.use(T).tabbable(),e?.use(T).focus()}moveFocus(t){let e=this.walker().find(n=>n.use(T).isTabbable());t(e)?.use(T).focus()}ensureTabbable(){this.walker().findOrFirst(t=>{t.use(T).isTabbable()})?.use(T).tabbable()}wipeTabbables(){this.walker().each(t=>{t.use(T).untabbable()})}untabbleOthers(t){this.walker().each(e=>{e!==t&&e.use(T).untabbable()})}walker(){return W(this.el,(t,{skip:e,reject:s})=>{if(t[this.constructor.name]&&t!==this.el)return s();if(!t[this.groupOfType.name])return e();if(t.hasAttribute("disabled"))return s()})}},T=class extends O{groupedByType=gt;boot({options:t}){t({hover:!1,disableable:null,tabbable:!1,tabbableAttr:null})}mount(){let t=this.options().disableable;if(!t)throw"Focusable requires a Disableable instance...";this.el.hasAttribute("tabindex")||(this.options().tabbable?this.tabbable():this.untabbable()),this.pauseFocusListener=this.on("focus",t.enabled(()=>{this.focus(!1)})).pause,this.on("focus",t.enabled(()=>{jt()&&h(this.el,"data-focus","")})),this.on("blur",t.enabled(()=>{y(this.el,"data-focus")})),this.options().hover&&this.on("pointerenter",t.enabled(()=>{this.group()?.untabbleOthers(this.el),this.tabbable()})),this.options().hover&&this.on("pointerleave",t.enabled(e=>{this.untabbable()}))}focus(t=!0){this.group()?.untabbleOthers(this.el),this.tabbable(),t&&this.pauseFocusListener(()=>{this.el.focus({focusVisible:!1})})}tabbable(){h(this.el,"tabindex","0"),this.options().tabbableAttr&&h(this.el,this.options().tabbableAttr,"")}untabbable(){h(this.el,"tabindex","-1"),this.options().tabbableAttr&&y(this.el,this.options().tabbableAttr)}isTabbable(){return this.el.getAttribute("tabindex")==="0"}};var G=class extends O{boot({options:t}){this.onChanges=[],Object.defineProperty(this.el,"disabled",{get:()=>this.el.hasAttribute("disabled"),set:s=>{s?this.el.setAttribute("disabled",""):this.el.removeAttribute("disabled")}}),this.el.hasAttribute("disabled")?this.el.disabled=!0:this.el.closest("[disabled]")&&(this.el.disabled=!0),new MutationObserver(s=>{this.onChanges.forEach(n=>n(this.el.disabled))}).observe(this.el,{attributeFilter:["disabled"]})}onChange(t){this.onChanges.push(t)}onInitAndChange(t){t(this.el.disabled),this.onChanges.push(t)}enabled(t){return(...e)=>{if(!this.el.disabled)return t(...e)}}disabled(t){return(...e)=>{if(this.el.disabled)return t(...e)}}};var kt=class extends H{groupOfType=P;boot({options:t}){t({wrap:!1,filter:!1}),this.onChanges=[]}onChange(t){this.onChanges.push(t)}activated(t){this.onChanges.forEach(e=>e())}activateFirst(){this.filterAwareWalker().first()?.use(P).activate()}activateSelectedOrFirst(t){if(!t||(s=>s.matches("ui-option")?getComputedStyle(s).display==="none":!1)(t)){this.filterAwareWalker().first()?.use(P).activate();return}t?.use(P).activate()}activateActiveOrFirst(){let t=this.getActive();if(!t){this.filterAwareWalker().first()?.use(P).activate();return}t?.use(P).activate()}activateActiveOrLast(){let t=this.getActive();if(!t){this.filterAwareWalker().last()?.use(P).activate();return}t?.use(P).activate()}activatePrev(){let t=this.getActive();if(!t){this.filterAwareWalker().last()?.use(P).activate();return}let e;this.options.wrap?e=this.filterAwareWalker().prevOrLast(t):e=this.filterAwareWalker().prev(t),e?.use(P).activate()}activateNext(){let t=this.getActive();if(!t){this.filterAwareWalker().first()?.use(P).activate();return}let e;this.options.wrap?e=this.filterAwareWalker().nextOrFirst(t):e=this.filterAwareWalker().next(t),e?.use(P).activate()}getActive(){return this.walker().find(t=>t.use(P).isActive())}clearActive(){this.getActive()?.use(P).deactivate()}filterAwareWalker(){let t=e=>e.matches("ui-option")?getComputedStyle(e).display==="none":!1;return W(this.el,(e,{skip:s,reject:n})=>{if(e[this.constructor.name]&&e!==this.el)return n();if(!e[this.groupOfType.name])return s();if(e.hasAttribute("disabled")||t(e))return n()})}},P=class i extends O{groupedByType=kt;mount(){this.el.addEventListener("mouseenter",()=>{this.activate()}),this.el.addEventListener("mouseleave",()=>{this.deactivate()})}activate(){this.group()&&this.group().walker().each(t=>t.use(i).deactivate(!1)),h(this.el,"data-active",""),this.el.scrollIntoView({block:"nearest"}),this.group()&&this.group().activated(this.el)}deactivate(t=!0){y(this.el,"data-active"),t&&this.group()&&this.group().activated(this.el)}isActive(){return this.el.hasAttribute("data-active")}};var Et=class extends H{groupOfType=K;boot({options:t}){t({}),this.onChanges=[],this.lastSearch=""}onChange(t){this.onChanges.push(t)}filter(t){t===""?this.walker().each(e=>{e.use(K).unfilter()}):this.walker().each(e=>{this.matches(e,t)?e.use(K).unfilter():e.use(K).filter()}),this.lastSearch!==t&&this.onChanges.forEach(e=>e()),this.lastSearch=t}matches(t,e){return t.textContent.toLowerCase().trim().includes(e.toLowerCase().trim())}hasResults(){return this.walker().some(t=>!t.use(K).isFiltered())}},K=class extends O{groupedByType=Et;boot({options:t}){t({mirror:null,keep:!1}),this.onChanges=[]}filter(){this.options().keep||(h(this.el,"data-hidden",""),this.options().mirror&&h(this.options().mirror,"data-hidden",""))}unfilter(){y(this.el,"data-hidden"),this.options().mirror&&y(this.options().mirror,"data-hidden","")}isFiltered(){return this.el.hasAttribute("data-hidden")}};var Vt=class extends S{boot(){if(!this.querySelector("template")){let t=document.createElement("template");t.setAttribute("name","placeholder"),t.innerHTML="<span>"+this.innerHTML+"</span>",this.innerHTML="",this.appendChild(t)}if(!this.querySelector('template[name="options"]')){let t=document.createElement("template");t.setAttribute("name","options"),t.innerHTML="<div><slot></slot></div>",this.appendChild(t)}if(!this.querySelector('template[name="option"]')){let t=document.createElement("template");t.setAttribute("name","option"),t.innerHTML="<div><slot></slot></div>",this.appendChild(t)}this.templates={placeholder:this.querySelector('template[name="placeholder"]'),overflow:this.querySelector('template[name="overflow"]'),options:this.querySelector('template[name="options"]'),option:this.querySelector('template[name="option"]')},this.templates.options.elsByValue=new Map,this.max=this.templates.overflow?.getAttribute("max")?this.templates.overflow.getAttribute("max"):1/0,this.selecteds=new Map,this.picker=this.closest("ui-select"),this.multiple=this.picker.hasAttribute("multiple")}mount(){queueMicrotask(()=>{this.picker._selectable.onInitAndChange(()=>{let e=!0;this.render(!0)});let t=this.picker.list();t&&new MutationObserver(e=>{queueMicrotask(()=>this.render())}).observe(t,{childList:!0})})}render(t){if(this.multiple){let e=this.picker.value,s=Array.from(this.selecteds.keys()).filter(r=>!e.includes(r)),n=e.filter(r=>!this.selecteds.has(r));s.forEach(r=>this.selecteds.delete(r));let o=new Map;for(let r of n){let a=this.picker._selectable.findByValue(r);if(!a){if(t)return setTimeout(()=>this.render());throw`Could not find option for value "${r}"`}o.set(r,a)}o.forEach((r,a)=>this.selecteds.set(a,r)),this.templates.placeholder?.clearPlaceholder?.(),this.templates.overflow?.clearOverflow?.(),this.templates.options?.clearOptions?.(),this.selecteds.size>0?this.renderOptions({hasOverflowed:r=>{if(this.max==="auto"){let a=!1;if(this.renderOverflow(this.selecteds.size,this.selecteds.size-r),this.clientWidth<this.scrollWidth&&(a=!0),this.templates.overflow?.clearOverflow?.(),a)return!0}return r>parseInt(this.max)},renderOverflow:r=>{this.templates?.overflow?.getAttribute("mode")!=="append"&&this.templates.options?.clearOptions?.(),this.renderOverflow(this.selecteds.size,r)}}):this.renderPlaceholder()}else{let e=this.picker.value;if(Array.from(this.selecteds.keys()).includes(e))return;if(this.selecteds.clear(),!["",null,void 0].includes(e)){let s=this.picker._selectable.findByValue(e);if(!s){if(t)return setTimeout(()=>{console.log("retrying..."),this.render()});throw`Could not find option for value "${e}"`}this.selecteds.set(e,s)}this.templates.placeholder?.clearPlaceholder?.(),this.templates.option?.clearOption?.(),this.selecteds.size>0?this.renderOption():this.renderPlaceholder()}}renderOptions({hasOverflowed:t,renderOverflow:e}){let s=document.createElement("div");s.style.display="contents";let n=Ct(this.templates.options,{default:s});this.templates.options.after(n),this.templates.options.clearOptions=()=>{n.remove(),this.templates.options.clearOptions=()=>{}};let o=0,r=!1;for(let[c,u]of this.selecteds){let p=new DocumentFragment;p.append(...u.el.cloneNode(!0).childNodes);let f=Ct(this.templates.option,{text:u.el.textContent.trim(),default:p,value:c});if(f.setAttribute("data-value",c),f.deselect=()=>u.deselect(),s.appendChild(f),o++,t(o)){r=!0,s.removeChild(f),o--;break}}let a=new DocumentFragment;a.append(...s.childNodes),s.replaceWith(a),r&&e(this.selecteds.size-o)}renderOption(){for(let[t,e]of this.selecteds){let s=new DocumentFragment;s.append(...e.el.cloneNode(!0).childNodes);let n=Ct(this.templates.option,{text:e.el.textContent.trim(),default:s,value:t});n.setAttribute("data-value",t),n.deselect=()=>e.deselect(),this.templates.option.after(n),this.templates.option.clearOption=()=>{n.remove(),this.templates.option.clearOption=()=>{}}}}renderPlaceholder(){if(!this.templates.placeholder)return;let t=Ct(this.templates.placeholder);this.templates.placeholder.after(t),this.templates.placeholder.clearPlaceholder=()=>{t.remove(),this.templates.placeholder.clearPlaceholder=()=>{}}}renderOverflow(t,e){if(!this.templates.overflow)return;let s=Ct(this.templates.overflow,{remainder:e,count:this.selecteds.size});this.templates.overflow.after(s),this.templates.overflow.clearOverflow=()=>{s.remove(),this.templates.placeholder.clearOverflow=()=>{}}}};function Ct(i,t={}){let e=i.content.cloneNode(!0);return Object.entries(t).forEach(([s,n])=>{(s==="default"?e.querySelectorAll("slot:not([name])"):e.querySelectorAll(`slot[name="${s}"]`)).forEach(r=>r.replaceWith(typeof n=="string"?document.createTextNode(n):n))}),e.firstElementChild}var Tt=class extends Rt{boot(){let t=this.list();this._controllable=new $(this),this._selectable=new it(t,{multiple:this.hasAttribute("multiple")}),this._controllable.initial(s=>s&&this._selectable.setState(s)),this._controllable.getter(()=>this._selectable.getState());let e=tt();this._controllable.setter(e(s=>{this._selectable.setState(s)})),this._selectable.onChange(e(()=>{this._controllable.dispatch(),this.dispatchEvent(new CustomEvent("select",{bubbles:!1}))}))}mount(){this._disableable=new G(this);let t=this.input(),e=this.button(),s=this.list(),n=this.hasAttribute("multiple"),o=this.hasAttribute("autocomplete"),r=this.hasAttribute("autocomplete")&&this.getAttribute("autocomplete").trim().split(" ").includes("strict"),a=this.querySelector("ui-options")||this,c=qi(a,"options");this._activatable=new kt(a,{filter:"data-hidden"}),!t&&!e&&this._disableable.onInitAndChange(l=>{l?this.removeAttribute("tabindex"):this.setAttribute("tabindex","0")}),this.hasAttribute("filter")&&this.getAttribute("filter")!=="manual"&&(this._filterable=new Et(s),this._filterable.onChange(()=>{this._activatable.clearActive(),this._filterable.hasResults()&&this._activatable.activateFirst()}),this.addEventListener("close",()=>{this._filterable&&this._filterable.filter("")}));let u=this.querySelector("[popover]:not(ui-tooltip [popover])"),p=u?.querySelector("input"),f=this.querySelector("input");f=u?.contains(f)?null:f;let v=this.querySelector("button");if(v=u?.contains(v)?null:v,!(u||f))Ot(this,this._activatable),Pt(this,this,this._activatable),ti(this,this._activatable,this._selectable);else if(!u&&f){let l=f;this._disableable.onInitAndChange(d=>{d?l&&h(l,"disabled",""):l&&y(l,"disabled")}),ae(this,l,this._selectable,this._popoverable),ti(l,this._activatable,this._selectable),si(o,r,this,l,this._selectable,this._popoverable),le(l),re(l),this._filterable&&oe(l,this._filterable),ii(l,this._activatable),Ot(l,this._activatable),Pt(this,l,this._activatable),qt(this,this._activatable)}else if(u&&f){let l=f;h(l,"role","combobox"),h(l,"aria-controls",c);let d=u;this._popoverable=new R(d),this._anchorable=new I(d,{reference:l,matchWidth:!0,position:this.hasAttribute("position")?this.getAttribute("position"):void 0,gap:this.hasAttribute("gap")?this.getAttribute("gap"):void 0,offset:this.hasAttribute("offset")?this.getAttribute("offset"):void 0}),si(o,r,this,l,this._selectable,this._popoverable),this._disableable.onInitAndChange(g=>{g?l&&h(l,"disabled",""):l&&y(l,"disabled")}),this.querySelectorAll("button").forEach(g=>{d.contains(g)||(h(g,"tabindex","-1"),h(g,"aria-controls",c),h(g,"aria-haspopup","listbox"),Ht(g,this._popoverable),w(g,"click",()=>{this._popoverable.toggle(),l.focus()}))}),ae(this,l,this._selectable,this._popoverable),ie(this,l,d,this._popoverable,this._anchorable),Ht(l,this._popoverable),le(l),re(l),this._filterable&&oe(l,this._filterable),ii(l,this._activatable),zi(l,this._popoverable),ne(l,this._popoverable,this._activatable,this._selectable),Hi(l,this._popoverable),Ot(l,this._activatable),Pt(this,l,this._activatable),qt(this,this._activatable),se(this._popoverable,this._activatable,this._selectable),ce(this,this._selectable,this._popoverable,n)}else if(u&&p){let l=v,d=p,g=u;h(l,"role","combobox"),h(d,"role","combobox"),h(l,"aria-controls",c),this._disableable.onInitAndChange(b=>{b?(l&&h(l,"disabled",""),d&&h(d,"disabled","")):(l&&y(l,"disabled"),d&&y(d,"disabled"))}),this._popoverable=new R(g),this._anchorable=new I(g,{reference:l,matchWidth:!0,position:this.hasAttribute("position")?this.getAttribute("position"):void 0,gap:this.hasAttribute("gap")?this.getAttribute("gap"):void 0,offset:this.hasAttribute("offset")?this.getAttribute("offset"):void 0}),le(d),re(d),this._filterable&&oe(d,this._filterable),$i(l,d,this._popoverable),ie(this,l,g,this._popoverable,this._anchorable),Ht(l,this._popoverable),ae(this,d,this._selectable,this._popoverable),ne(l,this._popoverable,this._activatable,this._selectable),ei(l,this._popoverable),Ot(d,this._activatable),Pt(this,d,this._activatable),qt(this,this._activatable),se(this._popoverable,this._activatable,this._selectable),ce(this,this._selectable,this._popoverable,n)}else if(u){let l=v,d=u;h(l,"role","combobox"),h(l,"aria-controls",c),this._disableable.onInitAndChange(g=>{g?(l&&h(l,"disabled",""),t&&h(t,"disabled","")):(l&&y(l,"disabled"),t&&y(t,"disabled"))}),this._popoverable=new R(d),this._anchorable=new I(d,{reference:l,matchWidth:!0,position:this.hasAttribute("position")?this.getAttribute("position"):void 0,gap:this.hasAttribute("gap")?this.getAttribute("gap"):void 0,offset:this.hasAttribute("offset")?this.getAttribute("offset"):void 0}),ie(this,l,d,this._popoverable,this._anchorable),Ht(l,this._popoverable),ne(l,this._popoverable,this._activatable,this._selectable),ei(l,this._popoverable),Ot(l,this._activatable),Pt(this,l,this._activatable),qt(this,this._activatable),se(this._popoverable,this._activatable,this._selectable),ce(this,this._selectable,this._popoverable,n)}new MutationObserver(()=>{setTimeout(()=>{if(!this._popoverable||this._popoverable.getState()){let l=this._selectable.selecteds()[0]?.el;queueMicrotask(()=>{this._activatable.activateSelectedOrFirst(l)})}else this._activatable.clearActive()})}).observe(s,{childList:!0})}button(){return this.querySelector("button:has(+ [popover])")}input(){return this.querySelector("input")}list(){return this.querySelector("ui-options")||this}clear(){this.input()&&(this.input().value="",this.input().dispatchEvent(new Event("input",{bubbles:!1})))}open(){this._popoverable.setState(!0)}close(){this._popoverable.setState(!1)}deselectLast(){!this.hasAttribute("multiple")&&this.value!==null&&(this.value=null,this.dispatchEvent(new Event("input",{bubbles:!1})),this.dispatchEvent(new Event("change",{bubbles:!1}))),this.hasAttribute("multiple")&&this.value.length!==0&&(this.value=this.value.slice(0,-1),this.dispatchEvent(new Event("input",{bubbles:!1})),this.dispatchEvent(new Event("change",{bubbles:!1})))}},ue=class extends S{boot(){h(this,"data-hidden","")}mount(){queueMicrotask(()=>{let t=this.closest("ui-autocomplete, ui-combobox, ui-select"),e=this.closest("ui-options");if(!e)return;let s=a=>getComputedStyle(a).display==="none",n=()=>{let a;CSS.supports("selector(&)")?a=Array.from(e.querySelectorAll("& > ui-option")).filter(c=>!s(c)).length===0:a=Array.from(e.querySelectorAll(":scope > ui-option")).filter(c=>!s(c)).length===0,a?y(this,"data-hidden"):h(this,"data-hidden","")};n();let o=t._filterable;o&&o.onChange(n),new MutationObserver(a=>{setTimeout(()=>n())}).observe(e,{childList:!0})})}};C("selected",Vt);C("select",Tt);C("empty",ue);q(({css:i})=>i`ui-select { display: block; }`);q(({css:i})=>i`ui-selected-option { display: contents; }`);q(({css:i})=>i`ui-empty { display: block; cursor: default; }`);function Ot(i,t){w(i,"keydown",e=>{["ArrowDown","ArrowUp","Escape"].includes(e.key)&&(e.key==="ArrowDown"?(t.activateNext(),e.preventDefault(),e.stopPropagation()):e.key==="ArrowUp"&&(t.activatePrev(),e.preventDefault(),e.stopPropagation()))})}function Pt(i,t,e){w(t,"keydown",s=>{if(s.key==="Enter"){let n=e.getActive();if(s.preventDefault(),s.stopPropagation(),!n)return;n.click(),i.dispatchEvent(new CustomEvent("action",{bubbles:!1,cancelable:!1}))}})}function qt(i,t,e=!1){w(i,e?"pointerdown":"click",s=>{if(s.target.closest("ui-option")){let n=s.target.closest("ui-option");if(n._disabled)return;n._selectable?.trigger(),i.dispatchEvent(new CustomEvent("action",{bubbles:!1,cancelable:!1})),s.preventDefault(),s.stopPropagation()}})}function ti(i,t,e){w(i,"focus",()=>{let s=e.selecteds()[0]?.el;t.activateSelectedOrFirst(s)}),w(i,"blur",()=>{t.clearActive()})}function qi(i){let t=M(i,"options");return h(i,"role","listbox"),t}function Ht(i,t){h(i,"aria-haspopup","listbox");let e=()=>{h(i,"aria-expanded",t.getState()?"true":"false"),t.getState()?h(i,"data-open",""):y(i,"data-open","")};t.onChange(()=>{e()}),e()}function ie(i,t,e,s,n){let o=()=>{Array.from([i,e]).forEach(r=>{s.getState()?h(r,"data-open",""):y(r,"data-open","")}),s.getState()&&n.reposition()};s.onChange(()=>o()),o(),s.onChange(()=>{s.getState()?i.dispatchEvent(new Event("open",{bubbles:!1,cancelable:!1})):i.dispatchEvent(new Event("close",{bubbles:!1,cancelable:!1}))})}function se(i,t,e){i.onChange(()=>{if(i.getState()){let s=e.selecteds()[0]?.el;queueMicrotask(()=>{t.activateSelectedOrFirst(s)})}else t.clearActive()})}function ne(i,t,e,s){w(i,"keydown",n=>{["ArrowDown","ArrowUp","Escape"].includes(n.key)&&(n.key==="ArrowDown"||n.key==="ArrowUp"?t.getState()||(t.setState(!0),n.preventDefault(),n.stopImmediatePropagation()):n.key==="Escape"&&t.getState()&&t.setState(!1))})}function Hi(i,t){w(i,"click",()=>{t.getState()||(t.setState(!0),i.focus())})}function ei(i,t){w(i,"click",()=>{t.setState(!t.getState()),i.focus()})}function $i(i,t,e){e.onChange(()=>{e.getState()&&setTimeout(()=>t.focus())})}function oe(i,t){t&&w(i,"input",e=>{t.filter(e.target.value)})}function re(i){w(i,"focus",()=>i.select())}function le(i){w(i,"change",t=>t.stopPropagation()),w(i,"input",t=>t.stopPropagation())}function zi(i,t){w(i,"keydown",e=>{(/^[a-zA-Z0-9]$/.test(e.key)||e.key==="Backspace")&&(t.getState()||t.setState(!0))})}function ae(i,t,e,s){if(!i.hasAttribute("clear"))return;let o=f=>{t.value=f,t.dispatchEvent(new Event("input",{bubbles:!1}))},r=i.getAttribute("clear"),a=r===""||r.split(" ").includes("action"),c=r===""||r.split(" ").includes("select"),u=r===""||r.split(" ").includes("close"),p=r===""||r.split(" ").includes("esc");r==="none"&&(a=c=u=p=!1),a?i.addEventListener("action",f=>{o("")}):c&&e.onChange(()=>{queueMicrotask(()=>o(""))}),u&&s.onChange(()=>{s.getState()||o("")}),p&&w(t,"keydown",f=>{f.key==="Escape"&&o("")})}function ce(i,t,e,s){let n=!s,o=!s;if(i.hasAttribute("close")){let r=i.getAttribute("close");n=r===""||r.split(" ").includes("action"),o=r.split(" ").includes("select"),r==="none"&&(n=o=!1)}n?i.addEventListener("action",r=>{e.setState(!1)}):o&&t.onChange(()=>{e.setState(!1)})}function ii(i,t){t.onChange(()=>{let e=t.getActive();e?h(i,"aria-activedescendant",e.id):y(i,"aria-activedescendant")})}function si(i,t,e,s,n,o){if(!i){h(s,"autocomplete","off"),h(s,"aria-autocomplete","none");return}let r=a=>{s.value=a,s.dispatchEvent(new Event("input",{bubbles:!1}))};h(s,"autocomplete","off"),h(s,"aria-autocomplete","list"),queueMicrotask(()=>{n.onInitAndChange(()=>{s.value=n.selectedTextValue()})}),e.addEventListener("action",a=>{r(n.selectedTextValue())}),t&&o.onChange(()=>{o.getState()||r(n.selectedTextValue())})}var Lt=class extends S{boot(){h(this,"tabindex","-1"),this.hasAttribute("popover")&&this.addEventListener("lofi-close-popovers",()=>{this.hidePopover()}),h(this,"role","listbox")}},he=class extends S{mount(){this._disabled=this.hasAttribute("disabled");let t=this;this._disabled&&(h(t,"disabled",""),h(t,"aria-disabled","true"));let e=M(t,"option");if(h(t,"role","option"),this._filterable=new K(t,{mirror:this,keep:!!this.closest("ui-empty")||this.getAttribute("filter")==="manual"}),this._disabled)return;this._activatable=new P(t),this.hasAttribute("action")||(this._selectable=new E(t,{value:this.getValue(),label:this.getLabel(),selectedInitially:this.hasAttribute("selected")})),new MutationObserver(n=>{n.forEach(o=>{o.attributeName==="selected"&&(this.hasAttribute("selected")?this._selectable.setState(!0):this._selectable.setState(!1))})}).observe(this,{attributeFilter:["selected"]})}get selected(){return this._disabled||!this?._selectable?!1:this._selectable.isSelected()}set selected(t){if(!this._disabled){if(!this?._selectable)return!1;this._selectable.setState(t)}}getLabel(){return this.hasAttribute("label")?this.getAttribute("label"):this.textContent.trim()}getValue(){return this.hasAttribute("value")?this.getAttribute("value"):this.textContent.trim()}};q(({css:i})=>i`ui-options:not([popover]), ui-option { display: block; cursor: default; }`);C("options",Lt);C("option",he);var fe=class i extends S{mount(){this._focusable=new gt(this,{wrap:!0}),w(this,"keydown",t=>{["ArrowRight"].includes(t.key)?(t.target===this?this._focusable.focusFirst():this._focusable.focusNext(),t.preventDefault(),t.stopPropagation()):["ArrowLeft"].includes(t.key)&&(t.target===this?this._focusable.focusFirst():this._focusable.focusPrev(),t.preventDefault(),t.stopPropagation())}),h(this,"role","menubar"),this.initializeMenubarItems()}initializeMenubarItems(){this.walker().each(t=>{t._disableable||Ui(t)})}walker(){return W(this,(t,{skip:e,reject:s})=>{if(t instanceof i||t.hasAttribute("popover")||t instanceof $t||t instanceof Lt)return s();if(!["a","button"].includes(t.localName))return e()})}},$t=class i extends S{boot(){if(this._focusable=new gt(this,{wrap:!1,ensureTabbable:!1}),w(this,"keydown",t=>{["ArrowDown"].includes(t.key)?(t.target===this?this._focusable.focusFirst():this._focusable.focusNext(),t.preventDefault(),t.stopPropagation()):["ArrowUp"].includes(t.key)&&(t.target===this?this._focusable.focusFirst():this._focusable.focusPrev(),t.preventDefault(),t.stopPropagation())}),Se(this,t=>this._focusable.focusBySearch(t)),this.hasAttribute("popover")&&this.addEventListener("lofi-close-popovers",()=>{setTimeout(()=>this.hidePopover(),50)}),this.parentElement.localName==="ui-dropdown"){let t=this.parentElement;w(t.trigger(),"keydown",e=>{e.key==="ArrowDown"&&(this.fromArrowDown=!0,this.showPopover(),e.preventDefault(),e.stopPropagation())})}h(this,"role","menu"),h(this,"tabindex","-1")}mount(){this.initializeMenuItems(),new MutationObserver(e=>{this.initializeMenuItems()}).observe(this,{childList:!0,subtree:!0})}onPopoverShow(){queueMicrotask(()=>{this.fromArrowDown?(this._focusable.focusFirst(),this.fromArrowDown=!1):this.focus()})}onPopoverHide(){this._focusable.wipeTabbables()}initializeMenuItems(){this.walker().each(t=>{t._disableable||ji(t)})}walker(){return W(this,(t,{skip:e,reject:s})=>{if(t instanceof i||t instanceof Tt)return s();if(!["a","button"].includes(t.localName))return e()})}},de=class extends S{boot(){}},pe=class extends S{boot(){this._disabled=this.hasAttribute("disabled"),this._disableable=new G(this);let t=this;if(this._disabled&&(h(t,"disabled",""),h(t,"aria-disabled","true")),M(t,"menu-checkbox"),h(t,"role","menuitemcheckbox"),this._disabled)return;t._focusable=new T(t,{disableable:this._disableable,hover:!0,tabbableAttr:"data-active"}),t._selectable=new E(t,{toggleable:!0,value:this.hasAttribute("value")?this.getAttribute("value"):t.textContent.trim(),label:this.hasAttribute("label")?this.getAttribute("label"):t.textContent.trim(),dataAttr:"data-checked",ariaAttr:"aria-checked",selectedInitially:this.hasAttribute("checked")}),this._controllable=new $(this),this._controllable.initial(s=>s&&t._selectable.setState(s)),this._controllable.getter(()=>t._selectable.getState());let e=tt();this._controllable.setter(e(s=>{this._selectable.setState(s)})),this._selectable.onChange(e(()=>{this._controllable.dispatch()})),w(t,"click",()=>{this.dispatchEvent(new CustomEvent("lofi-close-popovers",{bubbles:!0})),t._selectable.press()}),ve(t)}},be=class extends S{boot(){this._disabled=this.hasAttribute("disabled"),this._disableable=new G(this);let t=this;this._disabled&&(h(t,"disabled",""),h(t,"aria-disabled","true")),M(t,"menu-radio"),h(t,"role","menuitemradio"),!this._disabled&&(t._focusable=new T(t,{disableable:this._disableable,hover:!0,tabbableAttr:"data-active"}),t._selectable=new E(t,{toggleable:!1,value:this.hasAttribute("value")?this.getAttribute("value"):t.textContent.trim(),label:this.hasAttribute("label")?this.getAttribute("label"):t.textContent.trim(),dataAttr:"data-checked",ariaAttr:"aria-checked",selectedInitially:this.hasAttribute("checked")}),w(t,"click",()=>{this.dispatchEvent(new CustomEvent("lofi-close-popovers",{bubbles:!0})),t._selectable.press()}),ve(t))}},me=class extends S{boot(){this._selectable=new it(this),this._controllable=new $(this),h(this,"role","group"),this._controllable.initial(e=>e&&this._selectable.setState(e)),this._controllable.getter(()=>this._selectable.getState());let t=tt();this._controllable.setter(t(e=>{this._selectable.setState(e)})),this._selectable.onChange(t(()=>{this._controllable.dispatch()}))}},ge=class extends S{boot(){this._selectable=new it(this,{multiple:!0}),this._controllable=new $(this),h(this,"role","group"),this._controllable.initial(e=>e&&this._selectable.setState(e)),this._controllable.getter(()=>this._selectable.getState());let t=tt();this._controllable.setter(t(e=>{this._selectable.setState(e)})),this._selectable.onChange(t(()=>{this._controllable.dispatch()}))}};q(({css:i})=>i`ui-menu[popover]:popover-open { display: block; }`);q(({css:i})=>i`ui-menu[popover].\:popover-open { display: block; }`);q(({css:i})=>i`ui-menu-checkbox, ui-menu-radio { cursor: default; display: contents; }`);C("menu",$t);C("menubar",fe);C("submenu",de);C("menu-checkbox",pe);C("menu-radio",be);C("menu-radio-group",me);C("menu-checkbox-group",ge);function ve(i){w(i,"keydown",t=>{t.key==="Enter"&&(i.click(),t.preventDefault(),t.stopPropagation())}),w(i,"keydown",t=>{t.key===" "&&(t.preventDefault(),t.stopPropagation())}),w(i,"keyup",t=>{t.key===" "&&(i.click(),t.preventDefault(),t.stopPropagation())})}function ji(i){i._disableable=new G(i),i._disabled=i.hasAttribute("disabled");let t=i.querySelector("a"),e=i,s=i.parentElement.matches("ui-submenu")&&i.parentElement.querySelector("ui-menu[popover]"),n=t||e;if(i._disabled&&(h(n,"disabled",""),h(n,"aria-disabled","true")),M(n,"menu-item"),h(n,"role","menuitem"),!i._disabled)if(n._focusable=new T(n,{disableable:i._disableable,hover:!0,tabbableAttr:"data-active"}),!s)i.hasAttribute("disabled")||w(i,"click",()=>{i.dispatchEvent(new CustomEvent("lofi-close-popovers",{bubbles:!0}))}),ve(e);else{s._popoverable=new R(s,{trigger:e}),s._anchorable=new I(s,{reference:e,position:s.hasAttribute("position")?s.getAttribute("position"):"right start",gap:s.hasAttribute("gap")?s.getAttribute("gap"):"-5"}),e.addEventListener("click",r=>{s._popoverable.setState(!0)});let{clear:o}=ht(e,s,{gain(){s._popoverable.setState(!0)},lose(){s._popoverable.setState(!1)},focusable:!1});s._popoverable.onChange(()=>{s._popoverable.getState()||(o(),s._focusable.wipeTabbables()),s._anchorable.reposition()}),w(e,"keydown",r=>{r.key==="Enter"&&(s._popoverable.setState(!0),setTimeout(()=>s._focusable.focusFirst()))}),w(e,"keydown",r=>{r.key==="ArrowRight"&&(s._popoverable.setState(!0),setTimeout(()=>s._focusable.focusFirst()))}),w(s,"keydown",r=>{r.key==="ArrowLeft"&&(s._popoverable.setState(!1),e.focus(),r.stopPropagation())})}}function Ui(i){i._disableable=new G(i),i._disabled=i.hasAttribute("disabled");let s=i.querySelector("a")||i;i._disabled&&(h(s,"disabled",""),h(s,"aria-disabled","true")),M(s,"menu-item"),h(s,"role","menuitem"),!i._disabled&&(s._focusable=new T(s,{disableable:i._disableable}),i.hasAttribute("disabled")||w(i,"click",()=>{i.dispatchEvent(new CustomEvent("lofi-close-popovers",{bubbles:!0}))}),w(s,"focus",()=>{s.hasAttribute("data-active")||(h(s,"data-active",""),w(s,"blur",()=>{Ut(s,"data-active")}))}),w(s,"focus",()=>{h(s,"data-active","")}),w(s,"blur",()=>{Ut(s,"data-active")}),w(s,"mouseenter",()=>s.setAttribute("data-active","")),w(s,"mouseleave",()=>s.removeAttribute("data-active")))}})();
