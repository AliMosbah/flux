(()=>{function Z(e){let t=e({css:(n,...s)=>n.raw[0]+s.join("")}),i=new CSSStyleSheet;i.replaceSync(t),document.adoptedStyleSheets=[...document.adoptedStyleSheets,i]}function Jt(e,t){let i=e;for(;i;){if(t(i))return i;i=i.parentElement}}function j(e,t){let i=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,t?{acceptNode:n=>{let s,o;return t(n,{skip:()=>s=!0,reject:()=>o=!0}),s?NodeFilter.FILTER_SKIP:o?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT}}:{});return new Pt(i)}var Pt=class{constructor(t){this.walker=t}from(t){return this.walker.currentNode=t,this}first(){return this.walker.firstChild()}last(){return this.walker.lastChild()}next(t){return this.walker.currentNode=t,this.walker.nextSibling()}nextOrFirst(t){let i=this.next(t);return i||(this.walker.currentNode=this.walker.root,this.first())}prev(t){return this.walker.currentNode=t,this.walker.previousSibling()}prevOrLast(t){let i=this.prev(t);return i||(this.walker.currentNode=this.walker.root,this.last())}closest(t,i){}contains(t){return this.find(i=>i===t)}find(t){return this.walk((i,n)=>{t(i)&&n(i)})}findOrFirst(t){return this.find(t)||(this.walker.currentNode=this.walker.root),this.first()}each(t){this.walk(i=>t(i))}some(t){return!!this.find(t)}every(t){let i=!0;return this.walk(n=>{t(n)||(i=!1)}),i}map(t){let i=[];return this.walk(n=>i.push(t(n))),i}filter(t){let i=[];return this.walk(n=>t(n)&&i.push(n)),i}walk(t){let i,n=this.walker,s;for(;n.nextNode()&&(i=n.currentNode,t(i,o=>s=o),s===void 0););return s}};function F(e,t){customElements.define(`ui-${e}`,t)}function S(e,t,i,n={}){return e.addEventListener(t,i,n),{off:()=>e.removeEventListener(t,i),pause:s=>{e.removeEventListener(t,i),s(),e.addEventListener(t,i)}}}function Zt(e){return["a[href]","area[href]","input:not([disabled])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","iframe","object","embed","[tabindex]","[contenteditable]"].some(i=>e.matches(i))&&e.tabIndex>=0}function Pe(e,t){let i;return function(){let n=this,s=arguments;i||(e.apply(n,s),i=!0,setTimeout(()=>i=!1,t))}}var _t="pointer";document.addEventListener("keydown",()=>_t="keyboard",{capture:!0});document.addEventListener("pointerdown",e=>{_t=e.pointerType==="mouse"?"mouse":"touch"},{capture:!0});function Rt(){return _t==="keyboard"}function Re(){return _t==="touch"}function Qt(e,t){e.addEventListener("keydown",i=>{i.key.length===1&&/[a-zA-Z]/.test(i.key)&&(t(i.key),i.stopPropagation())})}function Le(e,t){return"lofi-"+(t?t+"-":"")+Math.random().toString(16).slice(2)}function Y(e,t){let i=e.hasAttribute("id")?e.getAttribute("id"):Le(e,t);return p(e,"id",i),e._x_bindings||(e._x_bindings={}),e._x_bindings.id||(e._x_bindings.id=i),i}function ot(){let e=!1;return t=>(...i)=>{e||(e=!0,t(...i),e=!1)}}function rt(e,t,{gain:i,lose:n,focusable:s,safeArea:o}){let r=!1;s&&document.addEventListener("focusin",u=>{Rt()&&(e.contains(u.target)||t.contains(u.target)?(r=!0,i()):(r=!1,n()))});let a=()=>{},l=()=>{},c=()=>{r=!1,n(),a(),l()},f=()=>{r=!1,a(),l()};return e.addEventListener("pointerenter",u=>{Re()||r||(r=!0,i(),setTimeout(()=>{let{safeArea:m,redraw:h,remove:b}=Fe(e,t,u.clientX,u.clientY);a=b;let g,w=Pe(d=>{let v=t.getBoundingClientRect(),x=e.getBoundingClientRect(),y;switch(m.contains(d.target)&&Me(x,v,d.clientX,d.clientY)?y="safeArea":t.contains(d.target)?y="panel":e.contains(d.target)?y="trigger":y="outside",g&&clearTimeout(g),y){case"outside":c();break;case"trigger":h(d.clientX,d.clientY);break;case"panel":a();break;case"safeArea":h(d.clientX,d.clientY),g=setTimeout(()=>{c()},300);break;default:break}},100);document.addEventListener("pointermove",w),l=()=>document.removeEventListener("pointermove",w)}))}),{clear:f}}function Fe(e,t,i,n){let s=document.createElement("div"),o=t.getBoundingClientRect(),r=e.getBoundingClientRect();s.style.position="fixed",p(s,"data-safe-area","");let a=(l,c)=>{if(o.top===0&&o.bottom===0)return;let f;o.left<r.left&&(f="left"),o.right>r.right&&(f="right"),o.top<r.top&&o.bottom<c&&(f="up"),o.bottom>r.bottom&&o.top>c&&(f="down"),f===void 0&&(f="right");let u,m,h,b,g,w,d,v,x=10;switch(f){case"left":u=o.right,m=Math.max(o.right,l)+5,h=m-u,b=Math.min(r.top,o.top)-x,g=Math.max(r.bottom,o.bottom)+x,w=g-b,d=c-b,v=`polygon(0% 0%, 100% ${d}px, 0% 100%)`;break;case"right":u=Math.min(o.left,l)-5,m=o.left,h=m-u,b=Math.min(r.top,o.top)-x,g=Math.max(r.bottom,o.bottom)+x,w=g-b,d=c-b,v=`polygon(0% ${d}px, 100% 0%, 100% 100%)`;break;case"up":u=Math.min(l,o.left)-x,m=Math.max(l,o.right)+x,h=m-u,b=o.bottom,g=Math.max(o.bottom,c)+5,w=g-b,d=l-u,v=`polygon(0% 0%, 100% 0%, ${d}px 100%)`;break;case"down":u=Math.min(l,o.left)-x,m=Math.max(l,o.right)+x,h=m-u,b=Math.min(o.top,c)-5,g=o.top,w=g-b,d=l-u,v=`polygon(${d}px 0%, 100% 100%, 0% 100%)`;break}s.style.left=`${u}px`,s.style.top=`${b}px`,s.style.width=`${h}px`,s.style.height=`${w}px`,s.style.clipPath=v};return{safeArea:s,redraw:(l,c)=>{s.isConnected||e.appendChild(s),a(l,c)},remove:()=>{s.remove()}}}function Me(e,t,i,n){return!De(e,i,n)&&!Ne(t,i,n)}function De(e,t,i){return e.left<=t&&t<=e.right&&e.top<=i&&i<=e.bottom}function Ne(e,t,i){return e.left<=t&&t<=e.right&&e.top<=i&&i<=e.bottom}function p(e,t,i){e._durableAttributeObserver===void 0&&(e._durableAttributeObserver=te(e,[t])),e._durableAttributeObserver.hasAttribute(t)||e._durableAttributeObserver.addAttribute(t),e._durableAttributeObserver.pause(()=>{e.setAttribute(t,i)})}function T(e,t){e._durableAttributeObserver===void 0&&(e._durableAttributeObserver=te(e,[t])),e._durableAttributeObserver.hasAttribute(t)||e._durableAttributeObserver.addAttribute(t),e._durableAttributeObserver.pause(()=>{e.removeAttribute(t)})}function te(e,t){let i=s=>{s.forEach(o=>{o.oldValue===null?e._durableAttributeObserver.pause(()=>T(e,o.attributeName)):e._durableAttributeObserver.pause(()=>p(e,o.attributeName,o.oldValue))})},n=new MutationObserver(s=>i(s));return n.observe(e,{attributeFilter:t,attributeOldValue:!0}),{attributes:t,hasAttribute(s){return this.attributes.includes(s)},addAttribute(s){this.attributes.includes(s)||this.attributes.push(s),n.observe(e,{attributeFilter:this.attributes,attributeOldValue:!0})},pause(s){i(n.takeRecords()),n.disconnect(),s(),n.observe(e,{attributeFilter:this.attributes,attributeOldValue:!0})}}}var k=class extends HTMLElement{constructor(){super(),this.boot?.()}connectedCallback(){queueMicrotask(()=>{this.mount?.()})}mixin(t,i={}){return new t(this,i)}appendMixin(t,i={}){return new t(this,i)}use(t){let i;return this.mixins.forEach(n=>{n instanceof t&&(i=n)}),i}uses(t){let i;return this.mixins.forEach(n=>{n instanceof t&&(i=!0)}),!!i}on(t,i){return S(this,t,i)}root(t,i={}){if(t===void 0)return this.__root;let n=document.createElement(t);for(let o in i)setAttribute(n,o,i[o]);let s=this.attachShadow({mode:"open"});return n.appendChild(document.createElement("slot")),s.appendChild(n),this.__root=n,this.__root}};var O=class{constructor(t,i={}){this.el=t,this.grouped=i.grouped===void 0,this.el.mixins=this.el.mixins?this.el.mixins:new Map,this.el.mixins.set(this.constructor.name,this),this.el[this.constructor.name]=!0,this.el.use||(this.el.use=k.prototype.use.bind(this.el)),this.opts=i,this.boot?.({options:n=>{let s=n;Object.entries(this.opts).forEach(([o,r])=>{r!==void 0&&(s[o]=r)}),this.opts=s}}),queueMicrotask(()=>{this.mount?.()})}options(){return this.opts}hasGroup(){return!!this.group()}group(){if(this.grouped!==!1)return Jt(this.el,t=>t[this.groupedByType.name])?.use(this.groupedByType)}on(t,i){return S(this.el,t,i)}},lt=class extends O{constructor(t,i={}){super(t,i)}walker(){return j(this.el,(t,{skip:i,reject:n})=>{if(t[this.constructor.name]&&t!==this.el)return n();if(!t[this.groupOfType.name]||!t.mixins.get(this.groupOfType.name).grouped)return i()})}};var X=class extends O{boot({options:t}){this.initialState=this.el.value,this.getterFunc=()=>{},this.setterFunc=i=>this.initialState=i,Object.defineProperty(this.el,"value",{get:()=>this.getterFunc(),set:i=>{this.setterFunc(i)}})}initial(t){t(this.initialState)}getter(t){this.getterFunc=t}setter(t){this.setterFunc=t}dispatch(){this.el.dispatchEvent(new Event("input",{bubbles:!1,cancelable:!0})),this.el.dispatchEvent(new Event("change",{bubbles:!1,cancelable:!0}))}};var Lt=new Set,U=class extends O{boot({options:t}){t({trigger:null}),p(this.el,"popover","manual"),this.trigger=this.options().trigger,this.onChanges=[],this.state=!1,S(this.el,"beforetoggle",i=>{let n=this.state;if(this.state=i.newState==="open",this.state){Be(this.el,Lt);let s=new AbortController,o=document.activeElement;setTimeout(()=>{Ve(this.el,o,s),$e(this.el,o,s),We(this.el,o,s)}),this.el.addEventListener("beforetoggle",r=>{r.newState==="closed"&&(s.abort(),o.focus())},{signal:s.signal})}n!==this.state&&this.onChanges.forEach(s=>s(this.state,n))}),S(this.el,"toggle",i=>{i.newState==="open"&&Lt.add(this.el),i.newState==="closed"&&Lt.delete(this.el)})}onChange(t){this.onChanges.push(t)}setState(t){t?this.show():this.hide()}getState(){return this.state}toggle(){this.el.togglePopover()}show(){this.el.showPopover()}hide(){this.el.hidePopover()}};function Be(e,t){t.forEach(i=>{e.contains(i)||i.contains(e)||i.hidePopover()})}function Ve(e,t,i){document.addEventListener("click",n=>{e.contains(n.target)||t===n.target||e.hidePopover()},{signal:i.signal})}function $e(e,t,i){document.addEventListener("focusin",n=>{e.contains(n.target)||t===n.target||(i.abort(),e.hidePopover())},{capture:!0,signal:i.signal})}function We(e,t,i){document.addEventListener("keydown",n=>{n.key==="Escape"&&e.hidePopover()},{signal:i.signal})}var N=Math.min,E=Math.max,wt=Math.round,vt=Math.floor,V=e=>({x:e,y:e}),He={left:"right",right:"left",bottom:"top",top:"bottom"},Ie={start:"end",end:"start"};function Ft(e,t,i){return E(e,N(t,i))}function at(e,t){return typeof e=="function"?e(t):e}function $(e){return e.split("-")[0]}function ct(e){return e.split("-")[1]}function Mt(e){return e==="x"?"y":"x"}function Dt(e){return e==="y"?"height":"width"}function q(e){return["top","bottom"].includes($(e))?"y":"x"}function Nt(e){return Mt(q(e))}function ee(e,t,i){i===void 0&&(i=!1);let n=ct(e),s=Nt(e),o=Dt(s),r=s==="x"?n===(i?"end":"start")?"right":"left":n==="start"?"bottom":"top";return t.reference[o]>t.floating[o]&&(r=gt(r)),[r,gt(r)]}function ie(e){let t=gt(e);return[kt(e),t,kt(t)]}function kt(e){return e.replace(/start|end/g,t=>Ie[t])}function ze(e,t,i){let n=["left","right"],s=["right","left"],o=["top","bottom"],r=["bottom","top"];switch(e){case"top":case"bottom":return i?t?s:n:t?n:s;case"left":case"right":return t?o:r;default:return[]}}function ne(e,t,i,n){let s=ct(e),o=ze($(e),i==="start",n);return s&&(o=o.map(r=>r+"-"+s),t&&(o=o.concat(o.map(kt)))),o}function gt(e){return e.replace(/left|right|bottom|top/g,t=>He[t])}function je(e){return{top:0,right:0,bottom:0,left:0,...e}}function se(e){return typeof e!="number"?je(e):{top:e,right:e,bottom:e,left:e}}function Q(e){let{x:t,y:i,width:n,height:s}=e;return{width:n,height:s,top:i,left:t,right:t+n,bottom:i+s,x:t,y:i}}function oe(e,t,i){let{reference:n,floating:s}=e,o=q(t),r=Nt(t),a=Dt(r),l=$(t),c=o==="y",f=n.x+n.width/2-s.width/2,u=n.y+n.height/2-s.height/2,m=n[a]/2-s[a]/2,h;switch(l){case"top":h={x:f,y:n.y-s.height};break;case"bottom":h={x:f,y:n.y+n.height};break;case"right":h={x:n.x+n.width,y:u};break;case"left":h={x:n.x-s.width,y:u};break;default:h={x:n.x,y:n.y}}switch(ct(t)){case"start":h[r]-=m*(i&&c?-1:1);break;case"end":h[r]+=m*(i&&c?-1:1);break}return h}var re=async(e,t,i)=>{let{placement:n="bottom",strategy:s="absolute",middleware:o=[],platform:r}=i,a=o.filter(Boolean),l=await(r.isRTL==null?void 0:r.isRTL(t)),c=await r.getElementRects({reference:e,floating:t,strategy:s}),{x:f,y:u}=oe(c,n,l),m=n,h={},b=0;for(let g=0;g<a.length;g++){let{name:w,fn:d}=a[g],{x:v,y:x,data:y,reset:A}=await d({x:f,y:u,initialPlacement:n,placement:m,strategy:s,middlewareData:h,rects:c,platform:r,elements:{reference:e,floating:t}});f=v??f,u=x??u,h={...h,[w]:{...h[w],...y}},A&&b<=50&&(b++,typeof A=="object"&&(A.placement&&(m=A.placement),A.rects&&(c=A.rects===!0?await r.getElementRects({reference:e,floating:t,strategy:s}):A.rects),{x:f,y:u}=oe(c,m,l)),g=-1)}return{x:f,y:u,placement:m,strategy:s,middlewareData:h}};async function Ot(e,t){var i;t===void 0&&(t={});let{x:n,y:s,platform:o,rects:r,elements:a,strategy:l}=e,{boundary:c="clippingAncestors",rootBoundary:f="viewport",elementContext:u="floating",altBoundary:m=!1,padding:h=0}=at(t,e),b=se(h),w=a[m?u==="floating"?"reference":"floating":u],d=Q(await o.getClippingRect({element:(i=await(o.isElement==null?void 0:o.isElement(w)))==null||i?w:w.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(a.floating)),boundary:c,rootBoundary:f,strategy:l})),v=u==="floating"?{x:n,y:s,width:r.floating.width,height:r.floating.height}:r.reference,x=await(o.getOffsetParent==null?void 0:o.getOffsetParent(a.floating)),y=await(o.isElement==null?void 0:o.isElement(x))?await(o.getScale==null?void 0:o.getScale(x))||{x:1,y:1}:{x:1,y:1},A=Q(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:v,offsetParent:x,strategy:l}):v);return{top:(d.top-A.top+b.top)/y.y,bottom:(A.bottom-d.bottom+b.bottom)/y.y,left:(d.left-A.left+b.left)/y.x,right:(A.right-d.right+b.right)/y.x}}var le=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var i,n;let{placement:s,middlewareData:o,rects:r,initialPlacement:a,platform:l,elements:c}=t,{mainAxis:f=!0,crossAxis:u=!0,fallbackPlacements:m,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:b="none",flipAlignment:g=!0,...w}=at(e,t);if((i=o.arrow)!=null&&i.alignmentOffset)return{};let d=$(s),v=q(a),x=$(a)===a,y=await(l.isRTL==null?void 0:l.isRTL(c.floating)),A=m||(x||!g?[gt(a)]:ie(a)),D=b!=="none";!m&&D&&A.push(...ne(a,g,b,y));let St=[a,...A],nt=await Ot(t,w),G=[],H=((n=o.flip)==null?void 0:n.overflows)||[];if(f&&G.push(nt[d]),u){let J=ee(s,r,y);G.push(nt[J[0]],nt[J[1]])}if(H=[...H,{placement:s,overflows:G}],!G.every(J=>J<=0)){var bt,qt;let J=(((bt=o.flip)==null?void 0:bt.index)||0)+1,Gt=St[J];if(Gt)return{data:{index:J,overflows:H},reset:{placement:Gt}};let mt=(qt=H.filter(st=>st.overflows[0]<=0).sort((st,I)=>st.overflows[1]-I.overflows[1])[0])==null?void 0:qt.placement;if(!mt)switch(h){case"bestFit":{var Kt;let st=(Kt=H.filter(I=>{if(D){let z=q(I.placement);return z===v||z==="y"}return!0}).map(I=>[I.placement,I.overflows.filter(z=>z>0).reduce((z,Te)=>z+Te,0)]).sort((I,z)=>I[1]-z[1])[0])==null?void 0:Kt[0];st&&(mt=st);break}case"initialPlacement":mt=a;break}if(s!==mt)return{reset:{placement:mt}}}return{}}}};async function Ye(e,t){let{placement:i,platform:n,elements:s}=e,o=await(n.isRTL==null?void 0:n.isRTL(s.floating)),r=$(i),a=ct(i),l=q(i)==="y",c=["left","top"].includes(r)?-1:1,f=o&&l?-1:1,u=at(t,e),{mainAxis:m,crossAxis:h,alignmentAxis:b}=typeof u=="number"?{mainAxis:u,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...u};return a&&typeof b=="number"&&(h=a==="end"?b*-1:b),l?{x:h*f,y:m*c}:{x:m*c,y:h*f}}var ae=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var i,n;let{x:s,y:o,placement:r,middlewareData:a}=t,l=await Ye(t,e);return r===((i=a.offset)==null?void 0:i.placement)&&(n=a.arrow)!=null&&n.alignmentOffset?{}:{x:s+l.x,y:o+l.y,data:{...l,placement:r}}}}},ce=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){let{x:i,y:n,placement:s}=t,{mainAxis:o=!0,crossAxis:r=!1,limiter:a={fn:w=>{let{x:d,y:v}=w;return{x:d,y:v}}},...l}=at(e,t),c={x:i,y:n},f=await Ot(t,l),u=q($(s)),m=Mt(u),h=c[m],b=c[u];if(o){let w=m==="y"?"top":"left",d=m==="y"?"bottom":"right",v=h+f[w],x=h-f[d];h=Ft(v,h,x)}if(r){let w=u==="y"?"top":"left",d=u==="y"?"bottom":"right",v=b+f[w],x=b-f[d];b=Ft(v,b,x)}let g=a.fn({...t,[m]:h,[u]:b});return{...g,data:{x:g.x-i,y:g.y-n}}}}};var ue=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){let{placement:i,rects:n,platform:s,elements:o}=t,{apply:r=()=>{},...a}=at(e,t),l=await Ot(t,a),c=$(i),f=ct(i),u=q(i)==="y",{width:m,height:h}=n.floating,b,g;c==="top"||c==="bottom"?(b=c,g=f===(await(s.isRTL==null?void 0:s.isRTL(o.floating))?"start":"end")?"left":"right"):(g=c,b=f==="end"?"top":"bottom");let w=h-l.top-l.bottom,d=m-l.left-l.right,v=N(h-l[b],w),x=N(m-l[g],d),y=!t.middlewareData.shift,A=v,D=x;if(u?D=f||y?N(x,d):d:A=f||y?N(v,w):w,y&&!f){let nt=E(l.left,0),G=E(l.right,0),H=E(l.top,0),bt=E(l.bottom,0);u?D=m-2*(nt!==0||G!==0?nt+G:E(l.left,l.right)):A=h-2*(H!==0||bt!==0?H+bt:E(l.top,l.bottom))}await r({...t,availableWidth:D,availableHeight:A});let St=await s.getDimensions(o.floating);return m!==St.width||h!==St.height?{reset:{rects:!0}}:{}}}};function tt(e){return he(e)?(e.nodeName||"").toLowerCase():"#document"}function P(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function B(e){var t;return(t=(he(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function he(e){return e instanceof Node||e instanceof P(e).Node}function R(e){return e instanceof Element||e instanceof P(e).Element}function M(e){return e instanceof HTMLElement||e instanceof P(e).HTMLElement}function fe(e){return typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof P(e).ShadowRoot}function ft(e){let{overflow:t,overflowX:i,overflowY:n,display:s}=L(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+i)&&!["inline","contents"].includes(s)}function de(e){return["table","td","th"].includes(tt(e))}function xt(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function Et(e){let t=Ct(),i=R(e)?L(e):e;return i.transform!=="none"||i.perspective!=="none"||(i.containerType?i.containerType!=="normal":!1)||!t&&(i.backdropFilter?i.backdropFilter!=="none":!1)||!t&&(i.filter?i.filter!=="none":!1)||["transform","perspective","filter"].some(n=>(i.willChange||"").includes(n))||["paint","layout","strict","content"].some(n=>(i.contain||"").includes(n))}function pe(e){let t=W(e);for(;M(t)&&!et(t);){if(Et(t))return t;if(xt(t))return null;t=W(t)}return null}function Ct(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function et(e){return["html","body","#document"].includes(tt(e))}function L(e){return P(e).getComputedStyle(e)}function yt(e){return R(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function W(e){if(tt(e)==="html")return e;let t=e.assignedSlot||e.parentNode||fe(e)&&e.host||B(e);return fe(t)?t.host:t}function be(e){let t=W(e);return et(t)?e.ownerDocument?e.ownerDocument.body:e.body:M(t)&&ft(t)?t:be(t)}function ut(e,t,i){var n;t===void 0&&(t=[]),i===void 0&&(i=!0);let s=be(e),o=s===((n=e.ownerDocument)==null?void 0:n.body),r=P(s);if(o){let a=Tt(r);return t.concat(r,r.visualViewport||[],ft(s)?s:[],a&&i?ut(a):[])}return t.concat(s,ut(s,[],i))}function Tt(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function we(e){let t=L(e),i=parseFloat(t.width)||0,n=parseFloat(t.height)||0,s=M(e),o=s?e.offsetWidth:i,r=s?e.offsetHeight:n,a=wt(i)!==o||wt(n)!==r;return a&&(i=o,n=r),{width:i,height:n,$:a}}function Vt(e){return R(e)?e:e.contextElement}function ht(e){let t=Vt(e);if(!M(t))return V(1);let i=t.getBoundingClientRect(),{width:n,height:s,$:o}=we(t),r=(o?wt(i.width):i.width)/n,a=(o?wt(i.height):i.height)/s;return(!r||!Number.isFinite(r))&&(r=1),(!a||!Number.isFinite(a))&&(a=1),{x:r,y:a}}var Xe=V(0);function ve(e){let t=P(e);return!Ct()||!t.visualViewport?Xe:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function Ue(e,t,i){return t===void 0&&(t=!1),!i||t&&i!==P(e)?!1:t}function it(e,t,i,n){t===void 0&&(t=!1),i===void 0&&(i=!1);let s=e.getBoundingClientRect(),o=Vt(e),r=V(1);t&&(n?R(n)&&(r=ht(n)):r=ht(e));let a=Ue(o,i,n)?ve(o):V(0),l=(s.left+a.x)/r.x,c=(s.top+a.y)/r.y,f=s.width/r.x,u=s.height/r.y;if(o){let m=P(o),h=n&&R(n)?P(n):n,b=m,g=Tt(b);for(;g&&n&&h!==b;){let w=ht(g),d=g.getBoundingClientRect(),v=L(g),x=d.left+(g.clientLeft+parseFloat(v.paddingLeft))*w.x,y=d.top+(g.clientTop+parseFloat(v.paddingTop))*w.y;l*=w.x,c*=w.y,f*=w.x,u*=w.y,l+=x,c+=y,b=P(g),g=Tt(b)}}return Q({width:f,height:u,x:l,y:c})}function qe(e){let{elements:t,rect:i,offsetParent:n,strategy:s}=e,o=s==="fixed",r=B(n),a=t?xt(t.floating):!1;if(n===r||a&&o)return i;let l={scrollLeft:0,scrollTop:0},c=V(1),f=V(0),u=M(n);if((u||!u&&!o)&&((tt(n)!=="body"||ft(r))&&(l=yt(n)),M(n))){let m=it(n);c=ht(n),f.x=m.x+n.clientLeft,f.y=m.y+n.clientTop}return{width:i.width*c.x,height:i.height*c.y,x:i.x*c.x-l.scrollLeft*c.x+f.x,y:i.y*c.y-l.scrollTop*c.y+f.y}}function Ke(e){return Array.from(e.getClientRects())}function xe(e){return it(B(e)).left+yt(e).scrollLeft}function Ge(e){let t=B(e),i=yt(e),n=e.ownerDocument.body,s=E(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),o=E(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight),r=-i.scrollLeft+xe(e),a=-i.scrollTop;return L(n).direction==="rtl"&&(r+=E(t.clientWidth,n.clientWidth)-s),{width:s,height:o,x:r,y:a}}function Je(e,t){let i=P(e),n=B(e),s=i.visualViewport,o=n.clientWidth,r=n.clientHeight,a=0,l=0;if(s){o=s.width,r=s.height;let c=Ct();(!c||c&&t==="fixed")&&(a=s.offsetLeft,l=s.offsetTop)}return{width:o,height:r,x:a,y:l}}function Ze(e,t){let i=it(e,!0,t==="fixed"),n=i.top+e.clientTop,s=i.left+e.clientLeft,o=M(e)?ht(e):V(1),r=e.clientWidth*o.x,a=e.clientHeight*o.y,l=s*o.x,c=n*o.y;return{width:r,height:a,x:l,y:c}}function me(e,t,i){let n;if(t==="viewport")n=Je(e,i);else if(t==="document")n=Ge(B(e));else if(R(t))n=Ze(t,i);else{let s=ve(e);n={...t,x:t.x-s.x,y:t.y-s.y}}return Q(n)}function ye(e,t){let i=W(e);return i===t||!R(i)||et(i)?!1:L(i).position==="fixed"||ye(i,t)}function Qe(e,t){let i=t.get(e);if(i)return i;let n=ut(e,[],!1).filter(a=>R(a)&&tt(a)!=="body"),s=null,o=L(e).position==="fixed",r=o?W(e):e;for(;R(r)&&!et(r);){let a=L(r),l=Et(r);!l&&a.position==="fixed"&&(s=null),(o?!l&&!s:!l&&a.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||ft(r)&&!l&&ye(e,r))?n=n.filter(f=>f!==r):s=a,r=W(r)}return t.set(e,n),n}function ti(e){let{element:t,boundary:i,rootBoundary:n,strategy:s}=e,r=[...i==="clippingAncestors"?xt(t)?[]:Qe(t,this._c):[].concat(i),n],a=r[0],l=r.reduce((c,f)=>{let u=me(t,f,s);return c.top=E(u.top,c.top),c.right=N(u.right,c.right),c.bottom=N(u.bottom,c.bottom),c.left=E(u.left,c.left),c},me(t,a,s));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function ei(e){let{width:t,height:i}=we(e);return{width:t,height:i}}function ii(e,t,i){let n=M(t),s=B(t),o=i==="fixed",r=it(e,!0,o,t),a={scrollLeft:0,scrollTop:0},l=V(0);if(n||!n&&!o)if((tt(t)!=="body"||ft(s))&&(a=yt(t)),n){let u=it(t,!0,o,t);l.x=u.x+t.clientLeft,l.y=u.y+t.clientTop}else s&&(l.x=xe(s));let c=r.left+a.scrollLeft-l.x,f=r.top+a.scrollTop-l.y;return{x:c,y:f,width:r.width,height:r.height}}function Bt(e){return L(e).position==="static"}function ge(e,t){return!M(e)||L(e).position==="fixed"?null:t?t(e):e.offsetParent}function Ae(e,t){let i=P(e);if(xt(e))return i;if(!M(e)){let s=W(e);for(;s&&!et(s);){if(R(s)&&!Bt(s))return s;s=W(s)}return i}let n=ge(e,t);for(;n&&de(n)&&Bt(n);)n=ge(n,t);return n&&et(n)&&Bt(n)&&!Et(n)?i:n||pe(e)||i}var ni=async function(e){let t=this.getOffsetParent||Ae,i=this.getDimensions,n=await i(e.floating);return{reference:ii(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function si(e){return L(e).direction==="rtl"}var oi={convertOffsetParentRelativeRectToViewportRelativeRect:qe,getDocumentElement:B,getClippingRect:ti,getOffsetParent:Ae,getElementRects:ni,getClientRects:Ke,getDimensions:ei,getScale:ht,isElement:R,isRTL:si};function ri(e,t){let i=null,n,s=B(e);function o(){var a;clearTimeout(n),(a=i)==null||a.disconnect(),i=null}function r(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),o();let{left:c,top:f,width:u,height:m}=e.getBoundingClientRect();if(a||t(),!u||!m)return;let h=vt(f),b=vt(s.clientWidth-(c+u)),g=vt(s.clientHeight-(f+m)),w=vt(c),v={rootMargin:-h+"px "+-b+"px "+-g+"px "+-w+"px",threshold:E(0,N(1,l))||1},x=!0;function y(A){let D=A[0].intersectionRatio;if(D!==l){if(!x)return r();D?r(!1,D):n=setTimeout(()=>{r(!1,1e-7)},1e3)}x=!1}try{i=new IntersectionObserver(y,{...v,root:s.ownerDocument})}catch{i=new IntersectionObserver(y,v)}i.observe(e)}return r(!0),o}function Se(e,t,i,n){n===void 0&&(n={});let{ancestorScroll:s=!0,ancestorResize:o=!0,elementResize:r=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=n,c=Vt(e),f=s||o?[...c?ut(c):[],...ut(t)]:[];f.forEach(d=>{s&&d.addEventListener("scroll",i,{passive:!0}),o&&d.addEventListener("resize",i)});let u=c&&a?ri(c,i):null,m=-1,h=null;r&&(h=new ResizeObserver(d=>{let[v]=d;v&&v.target===c&&h&&(h.unobserve(t),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var x;(x=h)==null||x.observe(t)})),i()}),c&&!l&&h.observe(c),h.observe(t));let b,g=l?it(e):null;l&&w();function w(){let d=it(e);g&&(d.x!==g.x||d.y!==g.y||d.width!==g.width||d.height!==g.height)&&i(),g=d,b=requestAnimationFrame(w)}return i(),()=>{var d;f.forEach(v=>{s&&v.removeEventListener("scroll",i),o&&v.removeEventListener("resize",i)}),u?.(),(d=h)==null||d.disconnect(),h=null,l&&cancelAnimationFrame(b)}}var _e=ae;var ke=ce,Oe=le,Ee=ue;var Ce=(e,t,i)=>{let n=new Map,s={platform:oi,...i},o={...s.platform,_c:n};return re(e,t,{...s,platform:o})};var K=class extends O{boot({options:t}){if(t({reference:null,auto:!0,position:"bottom start",gap:"5",offset:"0",matchWidth:!1}),this.options().reference===null||this.options().position===null)return;let i=li(this.el,this.options().reference,{position:this.options().position,gap:this.options().gap,offset:this.options().offset,matchWidth:this.options().matchWidth}),n=()=>{};this.reposition=(...s)=>{this.options().auto?n=Se(this.options().reference,this.el,i,{ancestorScroll:!0,ancestorResize:!0,elementResize:!0,layoutShift:!0,animationFrame:!0}):i(...s)},this.cleanup=()=>{n()}}};function li(e,t,{position:i,offset:n,gap:s,matchWidth:o}){let r;return(a=null,l=null)=>{Ce(t,e,{placement:ai(i),middleware:[Oe(),ke({padding:5,crossAxis:!0}),_e({mainAxis:Number(s),alignmentAxis:Number(n)}),o?Ee({apply({rects:c,elements:f}){Object.assign(f.floating.style,{width:`${c.reference.width}px`})}}):void 0]}).then(({x:c,y:f})=>{r=e.getAttribute("style"),Object.assign(e.style,{position:"absolute",inset:`${l||f}px auto auto ${a||c}px`})})}}function ai(e){return e.split(" ").join("-")}var $t=class extends k{boot(){let t=this.trigger(),i=this.overlay();if(t){if(!i)return console.warn("ui-dropdown: no [popover] overlay found",this)}else return console.warn("ui-dropdown: no trigger element found",this);this._disabled=this.hasAttribute("disabled"),this._controllable=new X(this),i._popoverable=new U(i),i._anchorable=new K(i,{reference:t,position:this.hasAttribute("position")?this.getAttribute("position"):void 0,gap:this.hasAttribute("gap")?this.getAttribute("gap"):void 0,offset:this.hasAttribute("offset")?this.getAttribute("offset"):void 0}),i._popoverable.onChange(()=>{i._popoverable.getState()?i._anchorable.reposition():i._anchorable.cleanup()}),this._controllable.initial(o=>i._popoverable.setState(o)),this._controllable.getter(()=>i._popoverable.getState());let n=ot();this._controllable.setter(o=>i._popoverable.setState(o)),i._popoverable.onChange(n(()=>this._controllable.dispatch())),this.hasAttribute("hover")&&rt(t,i,{gain(){i._popoverable.setState(!0)},lose(){i._popoverable.setState(!1)},focusable:!0}),S(t,"click",()=>i._popoverable.toggle()),i._popoverable.getState()?(p(this,"data-open",""),p(t,"data-open",""),p(i,"data-open","")):(T(this,"data-open"),T(t,"data-open"),T(i,"data-open")),i._popoverable.onChange(()=>{i._popoverable.getState()?(p(this,"data-open",""),p(t,"data-open",""),p(i,"data-open","")):(T(this,"data-open"),T(t,"data-open"),T(i,"data-open"))});let s=Y(i,"dropdown");p(t,"aria-haspopup","true"),p(t,"aria-controls",s),p(t,"aria-expanded",i._popoverable.getState()?"true":"false"),i._popoverable.onChange(()=>{p(t,"aria-expanded",i._popoverable.getState()?"true":"false")}),i._popoverable.onChange(()=>{i._popoverable.getState()?i.onPopoverShow?.():i.onPopoverHide?.()})}trigger(){return this.querySelector("button")}overlay(){return this.lastElementChild?.matches("[popover]")&&this.lastElementChild}};Z(({css:e})=>e`ui-dropdown { display: contents; }`);F("dropdown",$t);var Wt=class extends k{boot(){let t=this.hasAttribute("label")?"label":"description",i=this.button(),n=this.overlay();if(i){if(!n)return console.warn("ui-tooltip: no [popover] overlay found",this)}else return console.warn("ui-tooltip: no trigger element found",this);this._disabled=this.hasAttribute("disabled"),n._popoverable=new U(n),n._anchorable=new K(n,{reference:i,position:this.hasAttribute("position")?this.getAttribute("position"):void 0,gap:this.hasAttribute("gap")?this.getAttribute("gap"):void 0,offset:this.hasAttribute("offset")?this.getAttribute("offset"):void 0}),n._popoverable.onChange(()=>n._anchorable.reposition()),this._disabled||rt(i,n,{gain(){n._popoverable.setState(!0)},lose(){n._popoverable.setState(!1)},focusable:!0});let s=Y(n,"tooltip");p(i,"aria-controls",s),p(i,"aria-expanded","false"),n._popoverable.onChange(()=>{n._popoverable.getState()?p(i,"aria-expanded","true"):p(i,"aria-expanded","false")}),t==="label"?p(i,"aria-labelledby",s):p(i,"aria-describedby",s),p(n,"role","tooltip")}button(){return this.firstElementChild}overlay(){return this.lastElementChild}};Z(({css:e})=>e`ui-tooltip { display: contents; }`);F("tooltip",Wt);var dt=class extends lt{groupOfType=_;boot({options:t}){t({multiple:!1}),this.state=this.options().multiple?new Set:null,this.onChanges=[]}onInitAndChange(t){t(),this.onChanges.push(t)}onChange(t){this.onChanges.push(t)}changed(t,i=!1){if(t.ungrouped)return;let n=t.value,s=t.isSelected(),o=this.options().multiple;s?o?this.state.add(n):this.state=n:o?this.state.delete(n):this.state=null,i||this.onChanges.forEach(r=>r())}getState(){return this.options().multiple?Array.from(this.state):this.state}hasValue(t){return this.options().multiple?this.state.has(t):this.state===t}setState(t){t=this.options().multiple?t.map(n=>n+""):t+"",this.state=this.options().multiple?new Set(t):t;let i=this.options().multiple?t:[t];this.walker().each(n=>{let s=n.use(_);if(s.ungrouped)return;let o=i.includes(s.value);o&&!s.isSelected()?s.surgicallySelect():!o&&s.isSelected()&&s.surgicallyDeselect()}),this.onChanges.forEach(n=>n())}selected(){return this.walker().find(t=>t.use(_).isSelected()).use(_)}selecteds(){return this.walker().filter(t=>t.use(_).isSelected()).map(t=>t.use(_))}selectFirst(){this.walker().first()?.use(_).select()}selectAll(){this.walker().filter(t=>!t.use(_).isSelected()).map(t=>t.use(_).select())}deselectAll(){this.walker().filter(t=>t.use(_).isSelected()).map(t=>t.use(_).deselect())}allAreSelected(){return this.walker().filter(t=>t.use(_).isSelected()).length===this.walker().filter(t=>!0).length}noneAreSelected(){return this.state===null||this.state?.size===0}selectableByValue(t){return this.walker().find(i=>i.use(_).value===t)?.use(_)}deselectOthers(t){this.walker().each(i=>{i!==t&&i.use(_).surgicallyDeselect()})}selectedTextValue(){return this.options().multiple?Array.from(this.state).map(t=>this.convertValueStringToElementText(t)).join(", "):this.convertValueStringToElementText(this.state)}convertValueStringToElementText(t){let i=this.findByValue(t);return i?i.label||i.value:t}findByValue(t){return this.selecteds().find(i=>i.value===t)}walker(){return j(this.el,(t,{skip:i,reject:n})=>{if(t[this.constructor.name]&&t!==this.el)return n();if(!t[this.groupOfType.name]||t.mixins.get(this.groupOfType.name).ungrouped)return i()})}},_=class extends O{boot({options:t}){this.groupedByType=dt,t({ungrouped:!1,togglable:!1,value:void 0,label:void 0,selectedInitially:!1,dataAttr:"data-selected",ariaAttr:"aria-selected"}),this.ungrouped=this.options().ungrouped,this.value=this.options().value===void 0?this.el.value:this.options().value,this.value=this.value+"",this.label=this.options().label;let i=this.options().selectedInitially;this.group()&&this.group().hasValue(this.value)&&(i=!0),this.multiple=this.hasGroup()?this.group().options().multiple:!1,this.toggleable=this.options().toggleable||this.multiple,this.onSelects=[],this.onUnselects=[],this.onChanges=[],i?this.select(!0):(this.state=i,this.surgicallyDeselect(!0))}mount(){this.el.hasAttribute(this.options().ariaAttr)||p(this.el,this.options().ariaAttr,"false")}onChange(t){this.onChanges.push(t)}onSelect(t){this.onSelects.push(t)}onUnselect(t){this.onUnselects.push(t)}setState(t){t?this.select():this.deselect()}getState(){return this.state}press(){this.toggleable?this.toggle():this.select()}trigger(){this.toggleable?this.toggle():this.select()}toggle(){this.isSelected()?this.deselect():this.select()}isSelected(){return this.state}select(t=!1){let i=!this.isSelected();this.toggleable||this.group()?.deselectOthers(this.el),this.state=!0,p(this.el,this.options().ariaAttr,"true"),p(this.el,this.options().dataAttr,""),i&&(t||(this.onSelects.forEach(n=>n()),this.onChanges.forEach(n=>n())),this.group()?.changed(this,t))}surgicallySelect(){let t=!this.isSelected();this.state=!0,p(this.el,this.options().ariaAttr,"true"),p(this.el,this.options().dataAttr,""),t&&(this.onSelects.forEach(i=>i()),this.onChanges.forEach(i=>i()))}deselect(t=!0){let i=this.isSelected();this.state=!1,p(this.el,this.options().ariaAttr,"false"),T(this.el,this.options().dataAttr),i&&(this.onUnselects.forEach(n=>n()),this.onChanges.forEach(n=>n()),t&&this.group()?.changed(this))}surgicallyDeselect(t=!1){let i=this.isSelected();this.state=!1,p(this.el,this.options().ariaAttr,"false"),T(this.el,this.options().dataAttr),i&&!t&&(this.onUnselects.forEach(n=>n()),this.onChanges.forEach(n=>n()))}getValue(){return this.value}getLabel(){return this.label}};var At=class extends lt{groupOfType=C;boot({options:t}){t({wrap:!1,ensureTabbable:!0})}mount(){this.options().ensureTabbable&&this.ensureTabbable()}focusFirst(){let t;t=t||this.walker().find(i=>i.hasAttribute("autofocus")),t=t||this.walker().find(i=>i.getAttribute("tabindex")==="0"),t=t||this.walker().find(i=>i.getAttribute("tabindex")==="-1"),t=t||this.walker().find(i=>Zt(i)),t?.focus()}focusPrev(){this.moveFocus(t=>this.options().wrap?this.walker().prevOrLast(t):this.walker().prev(t))}focusNext(){this.moveFocus(t=>this.options().wrap?this.walker().nextOrFirst(t):this.walker().next(t))}focusBySearch(t){let i=this.walker().find(n=>n.textContent.toLowerCase().trim().startsWith(t.toLowerCase()));i?.use(C).tabbable(),i?.use(C).focus()}moveFocus(t){let i=this.walker().find(s=>s.use(C).isTabbable());t(i)?.use(C).focus()}ensureTabbable(){this.walker().findOrFirst(t=>{t.use(C).isTabbable()})?.use(C).tabbable()}wipeTabbables(){this.walker().each(t=>{t.use(C).untabbable()})}untabbleOthers(t){this.walker().each(i=>{i!==t&&i.use(C).untabbable()})}walker(){return j(this.el,(t,{skip:i,reject:n})=>{if(t[this.constructor.name]&&t!==this.el)return n();if(!t[this.groupOfType.name])return i();if(t.hasAttribute("disabled"))return n()})}},C=class extends O{groupedByType=At;boot({options:t}){t({hover:!1,disableable:null,tabbable:!1,tabbableAttr:null})}mount(){let t=this.options().disableable;if(!t)throw"Focusable requires a Disableable instance...";this.el.hasAttribute("tabindex")||(this.options().tabbable?this.tabbable():this.untabbable()),this.pauseFocusListener=this.on("focus",t.enabled(()=>{this.focus(!1)})).pause,this.on("focus",t.enabled(()=>{Rt()&&p(this.el,"data-focus","")})),this.on("blur",t.enabled(()=>{T(this.el,"data-focus")})),this.options().hover&&this.on("pointerenter",t.enabled(()=>{this.group()?.untabbleOthers(this.el),this.tabbable()})),this.options().hover&&this.on("pointerleave",t.enabled(i=>{this.untabbable()}))}focus(t=!0){this.group()?.untabbleOthers(this.el),this.tabbable(),t&&this.pauseFocusListener(()=>{this.el.focus({focusVisible:!1})})}tabbable(){p(this.el,"tabindex","0"),this.options().tabbableAttr&&p(this.el,this.options().tabbableAttr,"")}untabbable(){p(this.el,"tabindex","-1"),this.options().tabbableAttr&&T(this.el,this.options().tabbableAttr)}isTabbable(){return this.el.getAttribute("tabindex")==="0"}};var pt=class extends O{boot({options:t}){this.onChanges=[],Object.defineProperty(this.el,"disabled",{get:()=>this.el.hasAttribute("disabled"),set:n=>{n?this.el.setAttribute("disabled",""):this.el.removeAttribute("disabled")}}),this.el.hasAttribute("disabled")?this.el.disabled=!0:this.el.closest("[disabled]")&&(this.el.disabled=!0),new MutationObserver(n=>{this.onChanges.forEach(s=>s(this.el.disabled))}).observe(this.el,{attributeFilter:["disabled"]})}onChange(t){this.onChanges.push(t)}onInitAndChange(t){t(this.el.disabled),this.onChanges.push(t)}enabled(t){return(...i)=>{if(!this.el.disabled)return t(...i)}}};var Ht=class e extends k{boot(){if(this._focusable=new At(this,{wrap:!1,ensureTabbable:!1}),S(this,"keydown",t=>{["ArrowDown"].includes(t.key)?(t.target===this?this._focusable.focusFirst():this._focusable.focusNext(),t.preventDefault(),t.stopPropagation()):["ArrowUp"].includes(t.key)&&(t.target===this?this._focusable.focusFirst():this._focusable.focusPrev(),t.preventDefault(),t.stopPropagation())}),Qt(this,t=>this._focusable.focusBySearch(t)),this.hasAttribute("popover")&&this.addEventListener("lofi-close-popovers",()=>{setTimeout(()=>this.hidePopover(),50)}),this.parentElement.localName==="ui-dropdown"){let t=this.parentElement;S(t.trigger(),"keydown",i=>{i.key==="ArrowDown"&&(this.fromArrowDown=!0,this.showPopover(),i.preventDefault(),i.stopPropagation())})}p(this,"role","menu"),p(this,"tabindex","-1")}mount(){this.initializeMenuItems(),new MutationObserver(i=>{this.initializeMenuItems()}).observe(this,{childList:!0,subtree:!0})}onPopoverShow(){queueMicrotask(()=>{this.fromArrowDown?(this._focusable.focusFirst(),this.fromArrowDown=!1):this.focus()})}onPopoverHide(){this._focusable.wipeTabbables()}initializeMenuItems(){this.walker().each(t=>{t._disableable||ci(t)})}walker(){return j(this,(t,{skip:i,reject:n})=>{if(t instanceof e)return n();if(!["a","button"].includes(t.localName))return i()})}},It=class extends k{boot(){}},zt=class extends k{boot(){this._disabled=this.hasAttribute("disabled"),this._disableable=new pt(this);let t=this;this._disabled&&(p(t,"disabled",""),p(t,"aria-disabled","true"));let i=Y(t,"menu-checkbox");if(p(t,"role","menuitemcheckbox"),this._disabled)return;t._focusable=new C(t,{disableable:this._disableable,hover:!0,tabbableAttr:"data-active"}),t._selectable=new _(t,{toggleable:!0,value:this.hasAttribute("value")?this.getAttribute("value"):t.textContent.trim(),label:this.hasAttribute("label")?this.getAttribute("label"):t.textContent.trim(),dataAttr:"data-checked",ariaAttr:"aria-checked",selectedInitially:this.hasAttribute("checked")}),this._controllable=new X(this),this._controllable.initial(s=>s&&t._selectable.setState(s)),this._controllable.getter(()=>t._selectable.getState());let n=ot();this._controllable.setter(n(s=>{this._selectable.setState(s)})),this._selectable.onChange(n(()=>{this._controllable.dispatch()})),S(t,"click",()=>{this.dispatchEvent(new CustomEvent("lofi-close-popovers",{bubbles:!0})),t._selectable.press()}),Ut(t)}},jt=class extends k{boot(){this._disabled=this.hasAttribute("disabled"),this._disableable=new pt(this);let t=this;this._disabled&&(p(t,"disabled",""),p(t,"aria-disabled","true"));let i=Y(t,"menu-radio");p(t,"role","menuitemradio"),!this._disabled&&(t._focusable=new C(t,{disableable:this._disableable,hover:!0,tabbableAttr:"data-active"}),t._selectable=new _(t,{toggleable:!1,value:this.hasAttribute("value")?this.getAttribute("value"):t.textContent.trim(),label:this.hasAttribute("label")?this.getAttribute("label"):t.textContent.trim(),dataAttr:"data-checked",ariaAttr:"aria-checked",selectedInitially:this.hasAttribute("checked")}),S(t,"click",()=>{this.dispatchEvent(new CustomEvent("lofi-close-popovers",{bubbles:!0})),t._selectable.press()}),Ut(t))}},Yt=class extends k{boot(){this._selectable=new dt(this),this._controllable=new X(this),p(this,"role","group"),this._controllable.initial(i=>i&&this._selectable.setState(i)),this._controllable.getter(()=>this._selectable.getState());let t=ot();this._controllable.setter(t(i=>{this._selectable.setState(i)})),this._selectable.onChange(t(()=>{this._controllable.dispatch()}))}},Xt=class extends k{boot(){this._selectable=new dt(this,{multiple:!0}),this._controllable=new X(this),p(this,"role","group"),this._controllable.initial(i=>i&&this._selectable.setState(i)),this._controllable.getter(()=>this._selectable.getState());let t=ot();this._controllable.setter(t(i=>{this._selectable.setState(i)})),this._selectable.onChange(t(()=>{this._controllable.dispatch()}))}};Z(({css:e})=>e`ui-menu[popover]:popover-open { display: block; }`);Z(({css:e})=>e`ui-item, ui-menu-checkbox, ui-menu-radio { cursor: default; display: contents; }`);F("menu",Ht);F("submenu",It);F("menu-checkbox",zt);F("menu-radio",jt);F("menu-radio-group",Yt);F("menu-checkbox-group",Xt);function Ut(e){S(e,"keydown",t=>{t.key==="Enter"&&(e.click(),t.preventDefault(),t.stopPropagation())}),S(e,"keydown",t=>{t.key===" "&&(t.preventDefault(),t.stopPropagation())}),S(e,"keyup",t=>{t.key===" "&&(e.click(),t.preventDefault(),t.stopPropagation())})}function ci(e){e._disableable=new pt(e),e._disabled=e.hasAttribute("disabled");let t=e.querySelector("a"),i=e,n=e.parentElement.matches("ui-submenu")&&e.parentElement.querySelector("ui-menu[popover]"),s=t||i;e._disabled&&(p(s,"disabled",""),p(s,"aria-disabled","true"));let o=Y(s,"menu-item");if(p(s,"role","menuitem"),!e._disabled)if(s._focusable=new C(s,{disableable:e._disableable,hover:!0,tabbableAttr:"data-active"}),!n)e.hasAttribute("disabled")||S(e,"click",()=>{e.dispatchEvent(new CustomEvent("lofi-close-popovers",{bubbles:!0}))}),Ut(i);else{n._popoverable=new U(n,{trigger:i}),n._anchorable=new K(n,{reference:i,position:n.hasAttribute("position")?n.getAttribute("position"):"right start",gap:n.hasAttribute("gap")?n.getAttribute("gap"):"-5"}),i.addEventListener("click",a=>{n._popoverable.setState(!0)});let{clear:r}=rt(i,n,{gain(){n._popoverable.setState(!0)},lose(){n._popoverable.setState(!1)},focusable:!1});n._popoverable.onChange(()=>{n._popoverable.getState()||(r(),n._focusable.wipeTabbables()),n._anchorable.reposition()}),S(i,"keydown",a=>{a.key==="Enter"&&(n._popoverable.setState(!0),setTimeout(()=>n._focusable.focusFirst()))}),S(i,"keydown",a=>{a.key==="ArrowRight"&&(n._popoverable.setState(!0),setTimeout(()=>n._focusable.focusFirst()))}),S(n,"keydown",a=>{a.key==="ArrowLeft"&&(n._popoverable.setState(!1),i.focus(),a.stopPropagation())})}}})();
